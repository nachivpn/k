<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Context.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Keyword">module</a> <a id="43" href="Context.Base.html" class="Module">Context.Base</a> <a id="56" class="Symbol">(</a><a id="57" href="Context.Base.html#57" class="Bound">Ty</a> <a id="60" class="Symbol">:</a> <a id="62" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="65" class="Symbol">)</a> <a id="67" class="Keyword">where</a>

<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Data.Empty.html" class="Module">Data.Empty</a>   <a id="99" class="Keyword">using</a> <a id="105" class="Symbol">(</a><a id="106" href="Data.Empty.html#526" class="Datatype">⊥</a> <a id="108" class="Symbol">;</a> <a id="110" href="Data.Empty.html#628" class="Function">⊥-elim</a><a id="116" class="Symbol">)</a>
<a id="118" class="Keyword">open</a> <a id="123" class="Keyword">import</a> <a id="130" href="Data.Product.html" class="Module">Data.Product</a> <a id="143" class="Keyword">using</a> <a id="149" class="Symbol">(</a><a id="150" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a> <a id="152" class="Symbol">;</a> <a id="154" href="Data.Product.html#1167" class="Function Operator">_×_</a> <a id="158" class="Symbol">;</a> <a id="160" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="164" class="Symbol">;</a> <a id="166" href="Data.Product.html#1369" class="Function">∃</a> <a id="168" class="Symbol">;</a> <a id="170" href="Data.Product.html#1483" class="Function">∃₂</a> <a id="173" class="Symbol">;</a> <a id="175" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="180" class="Symbol">)</a>
<a id="182" class="Keyword">open</a> <a id="187" class="Keyword">import</a> <a id="194" href="Data.Unit.html" class="Module">Data.Unit</a>    <a id="207" class="Keyword">using</a> <a id="213" class="Symbol">(</a><a id="214" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="216" class="Symbol">;</a> <a id="218" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="220" class="Symbol">)</a>

<a id="223" class="Keyword">open</a> <a id="228" class="Keyword">import</a> <a id="235" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a> <a id="263" class="Keyword">using</a> <a id="269" class="Symbol">(</a><a id="270" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="280" class="Symbol">;</a> <a id="282" href="Relation.Binary.Definitions.html#1866" class="Function">Transitive</a><a id="292" class="Symbol">)</a>

<a id="295" class="Keyword">private</a>
  <a id="305" class="Keyword">variable</a>
    <a id="318" href="Context.Base.html#318" class="Generalizable">a</a> <a id="320" href="Context.Base.html#320" class="Generalizable">b</a> <a id="322" href="Context.Base.html#322" class="Generalizable">c</a> <a id="324" href="Context.Base.html#324" class="Generalizable">d</a> <a id="326" class="Symbol">:</a> <a id="328" href="Context.Base.html#57" class="Bound">Ty</a>

<a id="332" class="Keyword">infixl</a> <a id="339" class="Number">6</a> <a id="341" href="Context.Base.html#486" class="InductiveConstructor Operator">_#</a> <a id="344" href="Context.Base.html#450" class="InductiveConstructor Operator">_`,_</a>
<a id="349" class="Keyword">infix</a>  <a id="356" class="Number">5</a> <a id="358" href="Context.Base.html#1356" class="Datatype Operator">_⊆_</a>
<a id="362" class="Keyword">infixl</a> <a id="369" class="Number">5</a> <a id="371" href="Context.Base.html#849" class="Function Operator">_,,_</a>

<a id="377" class="Comment">-----------</a>
<a id="389" class="Comment">-- Contexts</a>
<a id="401" class="Comment">-----------</a>

<a id="414" class="Keyword">data</a> <a id="Ctx"></a><a id="419" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="423" class="Symbol">:</a> <a id="425" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="429" class="Keyword">where</a>
  <a id="Ctx.[]"></a><a id="437" href="Context.Base.html#437" class="InductiveConstructor">[]</a>   <a id="442" class="Symbol">:</a> <a id="444" href="Context.Base.html#419" class="Datatype">Ctx</a>
  <a id="Ctx._`,_"></a><a id="450" href="Context.Base.html#450" class="InductiveConstructor Operator">_`,_</a> <a id="455" class="Symbol">:</a> <a id="457" class="Symbol">(</a><a id="458" href="Context.Base.html#458" class="Bound">Γ</a> <a id="460" class="Symbol">:</a> <a id="462" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="465" class="Symbol">)</a> <a id="467" class="Symbol">→</a> <a id="469" class="Symbol">(</a><a id="470" href="Context.Base.html#470" class="Bound">a</a> <a id="472" class="Symbol">:</a> <a id="474" href="Context.Base.html#57" class="Bound">Ty</a><a id="476" class="Symbol">)</a> <a id="478" class="Symbol">→</a> <a id="480" href="Context.Base.html#419" class="Datatype">Ctx</a>
  <a id="Ctx._#"></a><a id="486" href="Context.Base.html#486" class="InductiveConstructor Operator">_#</a>   <a id="491" class="Symbol">:</a> <a id="493" class="Symbol">(</a><a id="494" href="Context.Base.html#494" class="Bound">Γ</a> <a id="496" class="Symbol">:</a> <a id="498" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="501" class="Symbol">)</a> <a id="503" class="Symbol">→</a> <a id="505" href="Context.Base.html#419" class="Datatype">Ctx</a>            <a id="520" class="Comment">-- a lock 🔒</a>

<a id="[#]"></a><a id="533" href="Context.Base.html#533" class="Function">[#]</a> <a id="537" class="Symbol">:</a> <a id="539" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="543" href="Context.Base.html#533" class="Function">[#]</a> <a id="547" class="Symbol">=</a> <a id="549" href="Context.Base.html#437" class="InductiveConstructor">[]</a> <a id="552" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a>

<a id="[_]"></a><a id="555" href="Context.Base.html#555" class="Function Operator">[_]</a> <a id="559" class="Symbol">:</a> <a id="561" href="Context.Base.html#57" class="Bound">Ty</a> <a id="564" class="Symbol">→</a> <a id="566" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="570" href="Context.Base.html#555" class="Function Operator">[_]</a> <a id="574" href="Context.Base.html#574" class="Bound">a</a> <a id="576" class="Symbol">=</a> <a id="578" href="Context.Base.html#437" class="InductiveConstructor">[]</a> <a id="581" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="584" href="Context.Base.html#574" class="Bound">a</a>

<a id="587" class="Keyword">variable</a>
  <a id="598" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="600" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="603" href="Context.Base.html#603" class="Generalizable">Γ&#39;&#39;</a> <a id="607" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="610" href="Context.Base.html#610" class="Generalizable">ΓL&#39;</a> <a id="614" href="Context.Base.html#614" class="Generalizable">ΓL&#39;&#39;</a> <a id="619" href="Context.Base.html#619" class="Generalizable">ΓLL</a> <a id="623" href="Context.Base.html#623" class="Generalizable">ΓLR</a> <a id="627" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="630" href="Context.Base.html#630" class="Generalizable">ΓR&#39;</a> <a id="634" href="Context.Base.html#634" class="Generalizable">ΓR&#39;&#39;</a> <a id="639" href="Context.Base.html#639" class="Generalizable">ΓRL</a> <a id="643" href="Context.Base.html#643" class="Generalizable">ΓRR</a> <a id="647" class="Symbol">:</a> <a id="649" href="Context.Base.html#419" class="Datatype">Ctx</a>
  <a id="655" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="657" href="Context.Base.html#657" class="Generalizable">Δ&#39;</a> <a id="660" href="Context.Base.html#660" class="Generalizable">Δ&#39;&#39;</a> <a id="664" href="Context.Base.html#664" class="Generalizable">ΔL</a> <a id="667" href="Context.Base.html#667" class="Generalizable">ΔL&#39;</a> <a id="671" href="Context.Base.html#671" class="Generalizable">ΔL&#39;&#39;</a> <a id="676" href="Context.Base.html#676" class="Generalizable">ΔLL</a> <a id="680" href="Context.Base.html#680" class="Generalizable">ΔLR</a> <a id="684" href="Context.Base.html#684" class="Generalizable">ΔR</a> <a id="687" href="Context.Base.html#687" class="Generalizable">ΔR&#39;</a> <a id="691" href="Context.Base.html#691" class="Generalizable">ΔR&#39;&#39;</a> <a id="696" href="Context.Base.html#696" class="Generalizable">ΔRL</a> <a id="700" href="Context.Base.html#700" class="Generalizable">ΔRR</a> <a id="704" class="Symbol">:</a> <a id="706" href="Context.Base.html#419" class="Datatype">Ctx</a>
  <a id="712" href="Context.Base.html#712" class="Generalizable">Θ</a> <a id="714" href="Context.Base.html#714" class="Generalizable">Θ&#39;</a> <a id="717" href="Context.Base.html#717" class="Generalizable">Θ&#39;&#39;</a> <a id="721" href="Context.Base.html#721" class="Generalizable">ΘL</a> <a id="724" href="Context.Base.html#724" class="Generalizable">ΘL&#39;</a> <a id="728" href="Context.Base.html#728" class="Generalizable">ΘL&#39;&#39;</a> <a id="733" href="Context.Base.html#733" class="Generalizable">ΘLL</a> <a id="737" href="Context.Base.html#737" class="Generalizable">ΘLR</a> <a id="741" href="Context.Base.html#741" class="Generalizable">ΘR</a> <a id="744" href="Context.Base.html#744" class="Generalizable">ΘR&#39;</a> <a id="748" href="Context.Base.html#748" class="Generalizable">ΘR&#39;&#39;</a> <a id="753" href="Context.Base.html#753" class="Generalizable">ΘRL</a> <a id="757" href="Context.Base.html#757" class="Generalizable">ΘRR</a> <a id="761" class="Symbol">:</a> <a id="763" href="Context.Base.html#419" class="Datatype">Ctx</a>
  <a id="769" href="Context.Base.html#769" class="Generalizable">Ξ</a> <a id="771" href="Context.Base.html#771" class="Generalizable">Ξ&#39;</a> <a id="774" href="Context.Base.html#774" class="Generalizable">Ξ&#39;&#39;</a> <a id="778" href="Context.Base.html#778" class="Generalizable">ΞL</a> <a id="781" href="Context.Base.html#781" class="Generalizable">ΞL&#39;</a> <a id="785" href="Context.Base.html#785" class="Generalizable">ΞL&#39;&#39;</a> <a id="790" href="Context.Base.html#790" class="Generalizable">ΞLL</a> <a id="794" href="Context.Base.html#794" class="Generalizable">ΞLR</a> <a id="798" href="Context.Base.html#798" class="Generalizable">ΞR</a> <a id="801" href="Context.Base.html#801" class="Generalizable">ΞR&#39;</a> <a id="805" href="Context.Base.html#805" class="Generalizable">ΞR&#39;&#39;</a> <a id="810" href="Context.Base.html#810" class="Generalizable">ΞRL</a> <a id="814" href="Context.Base.html#814" class="Generalizable">ΞRR</a> <a id="818" class="Symbol">:</a> <a id="820" href="Context.Base.html#419" class="Datatype">Ctx</a>

<a id="825" class="Comment">-- append contexts (++)</a>
<a id="_,,_"></a><a id="849" href="Context.Base.html#849" class="Function Operator">_,,_</a> <a id="854" class="Symbol">:</a> <a id="856" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="860" class="Symbol">→</a> <a id="862" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="866" class="Symbol">→</a> <a id="868" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="872" href="Context.Base.html#872" class="Bound">Γ</a> <a id="874" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="877" href="Context.Base.html#437" class="InductiveConstructor">[]</a>       <a id="886" class="Symbol">=</a> <a id="888" href="Context.Base.html#872" class="Bound">Γ</a>
<a id="890" href="Context.Base.html#890" class="Bound">Γ</a> <a id="892" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="895" class="Symbol">(</a><a id="896" href="Context.Base.html#896" class="Bound">Δ</a> <a id="898" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="901" href="Context.Base.html#901" class="Bound">x</a><a id="902" class="Symbol">)</a> <a id="904" class="Symbol">=</a> <a id="906" class="Symbol">(</a><a id="907" href="Context.Base.html#890" class="Bound">Γ</a> <a id="909" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="912" href="Context.Base.html#896" class="Bound">Δ</a><a id="913" class="Symbol">)</a> <a id="915" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="918" href="Context.Base.html#901" class="Bound">x</a>
<a id="920" href="Context.Base.html#920" class="Bound">Γ</a> <a id="922" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="925" class="Symbol">(</a><a id="926" href="Context.Base.html#926" class="Bound">Δ</a> <a id="928" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="929" class="Symbol">)</a>    <a id="934" class="Symbol">=</a> <a id="936" class="Symbol">(</a><a id="937" href="Context.Base.html#920" class="Bound">Γ</a> <a id="939" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="942" href="Context.Base.html#926" class="Bound">Δ</a><a id="943" class="Symbol">)</a> <a id="945" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a>

<a id="948" class="Comment">-- contexts free of locks</a>
<a id="#-free"></a><a id="974" href="Context.Base.html#974" class="Function">#-free</a> <a id="981" class="Symbol">:</a> <a id="983" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="987" class="Symbol">→</a> <a id="989" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="993" href="Context.Base.html#974" class="Function">#-free</a> <a id="1000" href="Context.Base.html#437" class="InductiveConstructor">[]</a>        <a id="1010" class="Symbol">=</a> <a id="1012" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="1014" href="Context.Base.html#974" class="Function">#-free</a> <a id="1021" class="Symbol">(</a><a id="1022" href="Context.Base.html#1022" class="Bound">Γ</a> <a id="1024" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1027" href="Context.Base.html#1027" class="Bound Operator">_a</a><a id="1029" class="Symbol">)</a> <a id="1031" class="Symbol">=</a> <a id="1033" href="Context.Base.html#974" class="Function">#-free</a> <a id="1040" href="Context.Base.html#1022" class="Bound">Γ</a>
<a id="1042" href="Context.Base.html#974" class="Function">#-free</a> <a id="1049" class="Symbol">(</a><a id="1050" href="Context.Base.html#1050" class="Bound Operator">_Γ</a> <a id="1053" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="1054" class="Symbol">)</a>    <a id="1059" class="Symbol">=</a> <a id="1061" href="Data.Empty.html#526" class="Datatype">⊥</a>

<a id="1064" class="Comment">-- context to left of the last lock</a>
<a id="←#"></a><a id="1100" href="Context.Base.html#1100" class="Function">←#</a> <a id="1103" class="Symbol">:</a> <a id="1105" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="1109" class="Symbol">→</a> <a id="1111" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="1115" href="Context.Base.html#1100" class="Function">←#</a> <a id="1118" href="Context.Base.html#437" class="InductiveConstructor">[]</a>        <a id="1128" class="Symbol">=</a> <a id="1130" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
<a id="1133" href="Context.Base.html#1100" class="Function">←#</a> <a id="1136" class="Symbol">(</a><a id="1137" href="Context.Base.html#1137" class="Bound">Γ</a> <a id="1139" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1142" href="Context.Base.html#1142" class="Bound Operator">_a</a><a id="1144" class="Symbol">)</a> <a id="1146" class="Symbol">=</a> <a id="1148" href="Context.Base.html#1100" class="Function">←#</a> <a id="1151" href="Context.Base.html#1137" class="Bound">Γ</a>
<a id="1153" href="Context.Base.html#1100" class="Function">←#</a> <a id="1156" class="Symbol">(</a><a id="1157" href="Context.Base.html#1157" class="Bound">Γ</a> <a id="1159" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="1160" class="Symbol">)</a>     <a id="1166" class="Symbol">=</a> <a id="1168" href="Context.Base.html#1157" class="Bound">Γ</a>

<a id="1171" class="Comment">-- context to the right of the last lock</a>
<a id="#→"></a><a id="1212" href="Context.Base.html#1212" class="Function">#→</a> <a id="1215" class="Symbol">:</a> <a id="1217" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="1221" class="Symbol">→</a> <a id="1223" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="1227" href="Context.Base.html#1212" class="Function">#→</a> <a id="1230" href="Context.Base.html#437" class="InductiveConstructor">[]</a>       <a id="1239" class="Symbol">=</a> <a id="1241" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
<a id="1244" href="Context.Base.html#1212" class="Function">#→</a> <a id="1247" class="Symbol">(</a><a id="1248" href="Context.Base.html#1248" class="Bound">Γ</a> <a id="1250" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1253" href="Context.Base.html#1253" class="Bound">a</a><a id="1254" class="Symbol">)</a> <a id="1256" class="Symbol">=</a> <a id="1258" href="Context.Base.html#1212" class="Function">#→</a> <a id="1261" href="Context.Base.html#1248" class="Bound">Γ</a> <a id="1263" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1266" href="Context.Base.html#1253" class="Bound">a</a>
<a id="1268" href="Context.Base.html#1212" class="Function">#→</a> <a id="1271" class="Symbol">(</a><a id="1272" href="Context.Base.html#1272" class="Bound Operator">_Γ</a> <a id="1275" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="1276" class="Symbol">)</a>   <a id="1280" class="Symbol">=</a> <a id="1282" href="Context.Base.html#437" class="InductiveConstructor">[]</a>

<a id="1286" class="Comment">-------------</a>
<a id="1300" class="Comment">-- Weakenings</a>
<a id="1314" class="Comment">-------------</a>

<a id="1329" class="Comment">-- weakening relation</a>
<a id="1351" class="Keyword">data</a> <a id="_⊆_"></a><a id="1356" href="Context.Base.html#1356" class="Datatype Operator">_⊆_</a>  <a id="1361" class="Symbol">:</a> <a id="1363" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="1373" class="Symbol">→</a> <a id="1375" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1379" class="Keyword">where</a>
  <a id="_⊆_.base"></a><a id="1387" href="Context.Base.html#1387" class="InductiveConstructor">base</a>   <a id="1394" class="Symbol">:</a> <a id="1396" href="Context.Base.html#437" class="InductiveConstructor">[]</a> <a id="1399" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1401" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
  <a id="_⊆_.drop"></a><a id="1406" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>   <a id="1413" class="Symbol">:</a> <a id="1415" class="Symbol">(</a><a id="1416" href="Context.Base.html#1416" class="Bound">w</a> <a id="1418" class="Symbol">:</a> <a id="1420" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1422" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1424" href="Context.Base.html#655" class="Generalizable">Δ</a><a id="1425" class="Symbol">)</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1431" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1433" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="1435" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1438" href="Context.Base.html#318" class="Generalizable">a</a>
  <a id="_⊆_.keep"></a><a id="1442" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>   <a id="1449" class="Symbol">:</a> <a id="1451" class="Symbol">(</a><a id="1452" href="Context.Base.html#1452" class="Bound">w</a> <a id="1454" class="Symbol">:</a> <a id="1456" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1458" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1460" href="Context.Base.html#655" class="Generalizable">Δ</a><a id="1461" class="Symbol">)</a> <a id="1463" class="Symbol">→</a> <a id="1465" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1467" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1470" href="Context.Base.html#318" class="Generalizable">a</a> <a id="1472" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1474" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="1476" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="1479" href="Context.Base.html#318" class="Generalizable">a</a>
  <a id="_⊆_.keep#"></a><a id="1483" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a>  <a id="1490" class="Symbol">:</a> <a id="1492" class="Symbol">(</a><a id="1493" href="Context.Base.html#1493" class="Bound">w</a> <a id="1495" class="Symbol">:</a> <a id="1497" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1499" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1501" href="Context.Base.html#655" class="Generalizable">Δ</a><a id="1502" class="Symbol">)</a> <a id="1504" class="Symbol">→</a> <a id="1506" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1508" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a> <a id="1510" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1512" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="1514" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a>

<a id="1517" class="Comment">{-
  Notes on _⊆_:

  In addition to the regular definition of weakening (`base`, `drop` and `keep`),
  we also allow weakening in the presence of locks:

  - `keep#` allows weakening under locks

  Disallowing weakening with locks in general ensures that values
  that depend on &quot;local&quot; assumptions cannot be boxed by simply
  weakening with locks.

-}</a>

<a id="1872" class="Keyword">pattern</a> <a id="drop[_]"></a><a id="1880" href="Context.Base.html#1880" class="InductiveConstructor Operator">drop[_]</a> <a id="1888" href="Context.Base.html#1904" class="Bound">a</a> <a id="1890" href="Context.Base.html#1907" class="Bound">w</a> <a id="1892" class="Symbol">=</a> <a id="1894" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="1899" class="Symbol">{</a><a id="1900" class="Argument">a</a> <a id="1902" class="Symbol">=</a> <a id="1904" href="Context.Base.html#1904" class="Bound">a</a><a id="1905" class="Symbol">}</a> <a id="1907" href="Context.Base.html#1907" class="Bound">w</a>
<a id="1909" class="Keyword">pattern</a> <a id="keep[_]"></a><a id="1917" href="Context.Base.html#1917" class="InductiveConstructor Operator">keep[_]</a> <a id="1925" href="Context.Base.html#1941" class="Bound">a</a> <a id="1927" href="Context.Base.html#1944" class="Bound">w</a> <a id="1929" class="Symbol">=</a> <a id="1931" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="1936" class="Symbol">{</a><a id="1937" class="Argument">a</a> <a id="1939" class="Symbol">=</a> <a id="1941" href="Context.Base.html#1941" class="Bound">a</a><a id="1942" class="Symbol">}</a> <a id="1944" href="Context.Base.html#1944" class="Bound">w</a>

<a id="1947" class="Keyword">variable</a>
  <a id="1958" href="Context.Base.html#1958" class="Generalizable">w</a> <a id="1960" href="Context.Base.html#1960" class="Generalizable">w&#39;</a> <a id="1963" href="Context.Base.html#1963" class="Generalizable">w&#39;&#39;</a> <a id="1967" class="Symbol">:</a> <a id="1969" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="1971" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="1973" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a>

<a id="1977" class="Comment">-- weakening is reflexive</a>
<a id="idWk[_]"></a><a id="2003" href="Context.Base.html#2003" class="Function Operator">idWk[_]</a> <a id="2011" class="Symbol">:</a> <a id="2013" class="Symbol">(</a><a id="2014" href="Context.Base.html#2014" class="Bound">Γ</a> <a id="2016" class="Symbol">:</a> <a id="2018" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="2021" class="Symbol">)</a> <a id="2023" class="Symbol">→</a> <a id="2025" href="Context.Base.html#2014" class="Bound">Γ</a> <a id="2027" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2029" href="Context.Base.html#2014" class="Bound">Γ</a>
<a id="2031" href="Context.Base.html#2003" class="Function Operator">idWk[_]</a> <a id="2039" href="Context.Base.html#437" class="InductiveConstructor">[]</a>        <a id="2049" class="Symbol">=</a> <a id="2051" href="Context.Base.html#1387" class="InductiveConstructor">base</a>
<a id="2056" href="Context.Base.html#2003" class="Function Operator">idWk[_]</a> <a id="2064" class="Symbol">(</a><a id="2065" href="Context.Base.html#2065" class="Bound">Γ</a> <a id="2067" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="2070" href="Context.Base.html#2070" class="Bound Operator">_a</a><a id="2072" class="Symbol">)</a> <a id="2074" class="Symbol">=</a> <a id="2076" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="2082" href="Context.Base.html#2003" class="Function Operator">idWk[</a> <a id="2088" href="Context.Base.html#2065" class="Bound">Γ</a> <a id="2090" href="Context.Base.html#2003" class="Function Operator">]</a>
<a id="2092" href="Context.Base.html#2003" class="Function Operator">idWk[_]</a> <a id="2100" class="Symbol">(</a><a id="2101" href="Context.Base.html#2101" class="Bound">Γ</a> <a id="2103" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="2104" class="Symbol">)</a>     <a id="2110" class="Symbol">=</a> <a id="2112" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="2118" href="Context.Base.html#2003" class="Function Operator">idWk[</a> <a id="2124" href="Context.Base.html#2101" class="Bound">Γ</a> <a id="2126" href="Context.Base.html#2003" class="Function Operator">]</a>

<a id="idWk"></a><a id="2129" href="Context.Base.html#2129" class="Function">idWk</a> <a id="2134" class="Symbol">=</a> <a id="2136" class="Symbol">λ</a> <a id="2138" class="Symbol">{</a><a id="2139" href="Context.Base.html#2139" class="Bound">Γ</a><a id="2140" class="Symbol">}</a> <a id="2142" class="Symbol">→</a> <a id="2144" href="Context.Base.html#2003" class="Function Operator">idWk[</a> <a id="2150" href="Context.Base.html#2139" class="Bound">Γ</a> <a id="2152" href="Context.Base.html#2003" class="Function Operator">]</a>

<a id="2155" class="Comment">-- weakening is transitive (or can be composed)</a>
<a id="_∙_"></a><a id="2203" href="Context.Base.html#2203" class="Function Operator">_∙_</a> <a id="2207" class="Symbol">:</a> <a id="2209" href="Context.Base.html#712" class="Generalizable">Θ</a> <a id="2211" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2213" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="2215" class="Symbol">→</a> <a id="2217" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="2219" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2221" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2223" class="Symbol">→</a> <a id="2225" href="Context.Base.html#712" class="Generalizable">Θ</a> <a id="2227" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2229" href="Context.Base.html#598" class="Generalizable">Γ</a>
<a id="2231" href="Context.Base.html#2231" class="Bound">w</a>       <a id="2239" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2241" href="Context.Base.html#1387" class="InductiveConstructor">base</a>     <a id="2250" class="Symbol">=</a> <a id="2252" href="Context.Base.html#2231" class="Bound">w</a>
<a id="2254" href="Context.Base.html#2254" class="Bound">w</a>       <a id="2262" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2264" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="2270" href="Context.Base.html#2270" class="Bound">w&#39;</a> <a id="2273" class="Symbol">=</a> <a id="2275" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="2281" class="Symbol">(</a><a id="2282" href="Context.Base.html#2254" class="Bound">w</a> <a id="2284" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2286" href="Context.Base.html#2270" class="Bound">w&#39;</a><a id="2288" class="Symbol">)</a>
<a id="2290" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="2296" href="Context.Base.html#2296" class="Bound">w</a> <a id="2298" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2300" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="2306" href="Context.Base.html#2306" class="Bound">w&#39;</a> <a id="2309" class="Symbol">=</a> <a id="2311" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="2317" class="Symbol">(</a><a id="2318" href="Context.Base.html#2296" class="Bound">w</a> <a id="2320" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2322" href="Context.Base.html#2306" class="Bound">w&#39;</a><a id="2324" class="Symbol">)</a>
<a id="2326" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="2332" href="Context.Base.html#2332" class="Bound">w</a> <a id="2334" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2336" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="2342" href="Context.Base.html#2342" class="Bound">w&#39;</a> <a id="2345" class="Symbol">=</a> <a id="2347" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="2353" class="Symbol">(</a><a id="2354" href="Context.Base.html#2332" class="Bound">w</a> <a id="2356" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2358" href="Context.Base.html#2342" class="Bound">w&#39;</a><a id="2360" class="Symbol">)</a>
<a id="2362" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="2368" href="Context.Base.html#2368" class="Bound">w</a> <a id="2370" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2372" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="2378" href="Context.Base.html#2378" class="Bound">w&#39;</a> <a id="2381" class="Symbol">=</a> <a id="2383" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="2389" class="Symbol">(</a><a id="2390" href="Context.Base.html#2368" class="Bound">w</a> <a id="2392" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="2394" href="Context.Base.html#2378" class="Bound">w&#39;</a><a id="2396" class="Symbol">)</a>

<a id="2399" class="Comment">-- weakening that &quot;generates a fresh variable&quot;</a>
<a id="fresh"></a><a id="2446" href="Context.Base.html#2446" class="Function">fresh</a> <a id="2452" class="Symbol">:</a> <a id="2454" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2456" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2458" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2460" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="2463" href="Context.Base.html#318" class="Generalizable">a</a>
<a id="2465" href="Context.Base.html#2446" class="Function">fresh</a> <a id="2471" class="Symbol">=</a> <a id="2473" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="2478" href="Context.Base.html#2129" class="Function">idWk</a>

<a id="fresh[_]"></a><a id="2484" href="Context.Base.html#2484" class="Function Operator">fresh[_]</a> <a id="2493" class="Symbol">=</a> <a id="2495" class="Symbol">λ</a> <a id="2497" class="Symbol">{</a><a id="2498" href="Context.Base.html#2498" class="Bound">Γ</a><a id="2499" class="Symbol">}</a> <a id="2501" href="Context.Base.html#2501" class="Bound">a</a> <a id="2503" class="Symbol">→</a> <a id="2505" href="Context.Base.html#2446" class="Function">fresh</a> <a id="2511" class="Symbol">{</a><a id="2512" href="Context.Base.html#2498" class="Bound">Γ</a><a id="2513" class="Symbol">}</a> <a id="2515" class="Symbol">{</a><a id="2516" href="Context.Base.html#2501" class="Bound">a</a><a id="2517" class="Symbol">}</a>

<a id="2520" class="Comment">------------</a>
<a id="2533" class="Comment">-- Variables</a>
<a id="2546" class="Comment">------------</a>

<a id="2560" class="Keyword">data</a> <a id="Var"></a><a id="2565" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2569" class="Symbol">:</a> <a id="2571" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="2575" class="Symbol">→</a> <a id="2577" href="Context.Base.html#57" class="Bound">Ty</a> <a id="2580" class="Symbol">→</a> <a id="2582" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2586" class="Keyword">where</a>
  <a id="Var.zero"></a><a id="2594" href="Context.Base.html#2594" class="InductiveConstructor">zero</a> <a id="2599" class="Symbol">:</a> <a id="2601" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2608" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="2611" href="Context.Base.html#318" class="Generalizable">a</a><a id="2612" class="Symbol">)</a> <a id="2614" href="Context.Base.html#318" class="Generalizable">a</a>
  <a id="Var.succ"></a><a id="2618" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2623" class="Symbol">:</a> <a id="2625" class="Symbol">(</a><a id="2626" href="Context.Base.html#2626" class="Bound">v</a> <a id="2628" class="Symbol">:</a> <a id="2630" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2634" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2636" href="Context.Base.html#318" class="Generalizable">a</a><a id="2637" class="Symbol">)</a> <a id="2639" class="Symbol">→</a> <a id="2641" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2645" class="Symbol">(</a><a id="2646" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2648" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="2651" href="Context.Base.html#320" class="Generalizable">b</a><a id="2652" class="Symbol">)</a> <a id="2654" href="Context.Base.html#318" class="Generalizable">a</a>

<a id="2657" class="Keyword">pattern</a> <a id="v0"></a><a id="2665" href="Context.Base.html#2665" class="InductiveConstructor">v0</a> <a id="2668" class="Symbol">=</a> <a id="2670" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>
<a id="2675" class="Keyword">pattern</a> <a id="v1"></a><a id="2683" href="Context.Base.html#2683" class="InductiveConstructor">v1</a> <a id="2686" class="Symbol">=</a> <a id="2688" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2693" href="Context.Base.html#2665" class="InductiveConstructor">v0</a>
<a id="2696" class="Keyword">pattern</a> <a id="v2"></a><a id="2704" href="Context.Base.html#2704" class="InductiveConstructor">v2</a> <a id="2707" class="Symbol">=</a> <a id="2709" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2714" href="Context.Base.html#2683" class="InductiveConstructor">v1</a>

<a id="wkVar"></a><a id="2718" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2724" class="Symbol">:</a> <a id="2726" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2728" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="2730" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="2733" class="Symbol">→</a> <a id="2735" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2739" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2741" href="Context.Base.html#318" class="Generalizable">a</a> <a id="2743" class="Symbol">→</a> <a id="2745" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2749" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="2752" href="Context.Base.html#318" class="Generalizable">a</a>
<a id="2754" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2760" class="Symbol">(</a><a id="2761" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="2766" href="Context.Base.html#2766" class="Bound">e</a><a id="2767" class="Symbol">)</a> <a id="2769" href="Context.Base.html#2769" class="Bound">v</a>        <a id="2778" class="Symbol">=</a> <a id="2780" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2785" class="Symbol">(</a><a id="2786" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2792" href="Context.Base.html#2766" class="Bound">e</a> <a id="2794" href="Context.Base.html#2769" class="Bound">v</a><a id="2795" class="Symbol">)</a>
<a id="2797" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2803" class="Symbol">(</a><a id="2804" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="2809" href="Context.Base.html#2809" class="Bound">e</a><a id="2810" class="Symbol">)</a> <a id="2812" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>     <a id="2821" class="Symbol">=</a> <a id="2823" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>
<a id="2828" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2834" class="Symbol">(</a><a id="2835" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="2840" href="Context.Base.html#2840" class="Bound">e</a><a id="2841" class="Symbol">)</a> <a id="2843" class="Symbol">(</a><a id="2844" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2849" href="Context.Base.html#2849" class="Bound">v</a><a id="2850" class="Symbol">)</a> <a id="2852" class="Symbol">=</a> <a id="2854" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2859" class="Symbol">(</a><a id="2860" href="Context.Base.html#2718" class="Function">wkVar</a> <a id="2866" href="Context.Base.html#2840" class="Bound">e</a> <a id="2868" href="Context.Base.html#2849" class="Bound">v</a><a id="2869" class="Symbol">)</a>

<a id="2872" class="Comment">-- OBS: in general, Γ ⊈ Δ ,, Γ</a>
<a id="leftWkVar"></a><a id="2903" href="Context.Base.html#2903" class="Function">leftWkVar</a> <a id="2913" class="Symbol">:</a> <a id="2915" class="Symbol">(</a><a id="2916" href="Context.Base.html#2916" class="Bound">v</a> <a id="2918" class="Symbol">:</a> <a id="2920" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2924" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="2926" href="Context.Base.html#318" class="Generalizable">a</a><a id="2927" class="Symbol">)</a> <a id="2929" class="Symbol">→</a> <a id="2931" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="2935" class="Symbol">(</a><a id="2936" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="2938" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="2941" href="Context.Base.html#598" class="Generalizable">Γ</a><a id="2942" class="Symbol">)</a> <a id="2944" href="Context.Base.html#318" class="Generalizable">a</a>
<a id="2946" href="Context.Base.html#2903" class="Function">leftWkVar</a> <a id="2956" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>     <a id="2965" class="Symbol">=</a> <a id="2967" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>
<a id="2972" href="Context.Base.html#2903" class="Function">leftWkVar</a> <a id="2982" class="Symbol">(</a><a id="2983" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2988" href="Context.Base.html#2988" class="Bound">v</a><a id="2989" class="Symbol">)</a> <a id="2991" class="Symbol">=</a> <a id="2993" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="2998" class="Symbol">(</a><a id="2999" href="Context.Base.html#2903" class="Function">leftWkVar</a> <a id="3009" href="Context.Base.html#2988" class="Bound">v</a><a id="3010" class="Symbol">)</a>

<a id="3013" class="Comment">--------------------</a>
<a id="3034" class="Comment">-- Context extension</a>
<a id="3055" class="Comment">--------------------</a>

<a id="3077" class="Comment">-- The three-place relation Ext θ relates contexts Γ, ΓL, and ΓR</a>
<a id="3142" class="Comment">-- exactly when Γ = ΓL ,, ΓR (cf. lemmas extIs,, and ,,IsExt</a>
<a id="3203" class="Comment">-- below). In other words, Ext θ is the graph of context concatenation</a>
<a id="3274" class="Comment">-- _,,_. The relation Ext θ Γ ΓL ΓR may be read as &quot;Γ is ΓL extended</a>
<a id="3343" class="Comment">-- to the right with ΓR&quot;.</a>
<a id="3369" class="Comment">--</a>
<a id="3372" class="Comment">-- The flag θ specifies whether the context ΓR we are extending with</a>
<a id="3441" class="Comment">-- may contain locks (if set to tt) or not (if set to ff).</a>
<a id="3500" class="Comment">--</a>
<a id="3503" class="Comment">-- Ext is used below to define lock-free and arbitrary context</a>
<a id="3566" class="Comment">-- extensions LFExt and CExt, respectively, in a uniform way. The</a>
<a id="3632" class="Comment">-- relations LFExt and CExt in turn are used to define the modal</a>
<a id="3697" class="Comment">-- accessibility premises of the unbox term formers for λ_IK (see data</a>
<a id="3768" class="Comment">-- Tm in IK.Term.Base) and λ_IS4 (see data Tm in IS4.Term.Base),</a>
<a id="3833" class="Comment">-- respectively, in a uniform way.</a>

<a id="3869" class="Keyword">data</a> <a id="Flag"></a><a id="3874" href="Context.Base.html#3874" class="Datatype">Flag</a> <a id="3879" class="Symbol">:</a> <a id="3881" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3885" class="Keyword">where</a>
  <a id="Flag.tt"></a><a id="3893" href="Context.Base.html#3893" class="InductiveConstructor">tt</a> <a id="Flag.ff"></a><a id="3896" href="Context.Base.html#3896" class="InductiveConstructor">ff</a> <a id="3899" class="Symbol">:</a> <a id="3901" href="Context.Base.html#3874" class="Datatype">Flag</a>

<a id="3907" class="Keyword">variable</a>
  <a id="3918" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="3920" href="Context.Base.html#3920" class="Generalizable">θ&#39;</a> <a id="3923" class="Symbol">:</a> <a id="3925" href="Context.Base.html#3874" class="Datatype">Flag</a>

<a id="3931" class="Comment">-- with locks?</a>
<a id="WL"></a><a id="3946" href="Context.Base.html#3946" class="Function">WL</a> <a id="3949" class="Symbol">:</a> <a id="3951" href="Context.Base.html#3874" class="Datatype">Flag</a> <a id="3956" class="Symbol">→</a> <a id="3958" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3962" href="Context.Base.html#3946" class="Function">WL</a> <a id="3965" href="Context.Base.html#3893" class="InductiveConstructor">tt</a> <a id="3968" class="Symbol">=</a> <a id="3970" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="3972" href="Context.Base.html#3946" class="Function">WL</a> <a id="3975" href="Context.Base.html#3896" class="InductiveConstructor">ff</a> <a id="3978" class="Symbol">=</a> <a id="3980" href="Data.Empty.html#526" class="Datatype">⊥</a>

<a id="3983" class="Keyword">data</a> <a id="Ext"></a><a id="3988" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="3992" class="Symbol">(</a><a id="3993" href="Context.Base.html#3993" class="Bound">θ</a> <a id="3995" class="Symbol">:</a> <a id="3997" href="Context.Base.html#3874" class="Datatype">Flag</a><a id="4001" class="Symbol">)</a> <a id="4003" class="Symbol">:</a> <a id="4005" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4009" class="Symbol">→</a> <a id="4011" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4015" class="Symbol">→</a> <a id="4017" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4021" class="Symbol">→</a> <a id="4023" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4027" class="Keyword">where</a>
  <a id="Ext.nil"></a><a id="4035" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>  <a id="4040" class="Symbol">:</a> <a id="4042" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4046" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4048" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4050" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4052" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
  <a id="Ext.ext"></a><a id="4057" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>  <a id="4062" class="Symbol">:</a> <a id="4064" class="Symbol">(</a><a id="4065" href="Context.Base.html#4065" class="Bound">e</a> <a id="4067" class="Symbol">:</a> <a id="4069" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4073" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4075" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4077" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="4080" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="4082" class="Symbol">)</a> <a id="4084" class="Symbol">→</a> <a id="4086" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4090" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4092" class="Symbol">(</a><a id="4093" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4095" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="4098" href="Context.Base.html#318" class="Generalizable">a</a><a id="4099" class="Symbol">)</a> <a id="4101" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="4104" class="Symbol">(</a><a id="4105" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="4108" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="4111" href="Context.Base.html#318" class="Generalizable">a</a><a id="4112" class="Symbol">)</a>
  <a id="Ext.ext#"></a><a id="4116" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="4121" class="Symbol">:</a> <a id="4123" href="Context.Base.html#3946" class="Function">WL</a> <a id="4126" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4128" class="Symbol">→</a> <a id="4130" class="Symbol">(</a><a id="4131" href="Context.Base.html#4131" class="Bound">e</a> <a id="4133" class="Symbol">:</a> <a id="4135" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4139" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4141" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4143" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="4146" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="4148" class="Symbol">)</a> <a id="4150" class="Symbol">→</a> <a id="4152" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4156" href="Context.Base.html#3993" class="Bound">θ</a> <a id="4158" class="Symbol">(</a><a id="4159" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="4161" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="4162" class="Symbol">)</a> <a id="4164" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="4167" class="Symbol">(</a><a id="4168" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="4171" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="4172" class="Symbol">)</a>

<a id="4175" class="Keyword">pattern</a> <a id="nil[_]"></a><a id="4183" href="Context.Base.html#4183" class="InductiveConstructor Operator">nil[_]</a> <a id="4190" href="Context.Base.html#4206" class="Bound">Γ</a>   <a id="4194" class="Symbol">=</a> <a id="4196" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>  <a id="4201" class="Symbol">{</a><a id="4202" class="Argument">Γ</a> <a id="4204" class="Symbol">=</a> <a id="4206" href="Context.Base.html#4206" class="Bound">Γ</a><a id="4207" class="Symbol">}</a>
<a id="4209" class="Keyword">pattern</a> <a id="ext[_]"></a><a id="4217" href="Context.Base.html#4217" class="InductiveConstructor Operator">ext[_]</a> <a id="4224" href="Context.Base.html#4240" class="Bound">a</a> <a id="4226" href="Context.Base.html#4243" class="Bound">e</a> <a id="4228" class="Symbol">=</a> <a id="4230" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>  <a id="4235" class="Symbol">{</a><a id="4236" class="Argument">a</a> <a id="4238" class="Symbol">=</a> <a id="4240" href="Context.Base.html#4240" class="Bound">a</a><a id="4241" class="Symbol">}</a> <a id="4243" href="Context.Base.html#4243" class="Bound">e</a>
<a id="4245" class="Keyword">pattern</a> <a id="ext#-"></a><a id="4253" href="Context.Base.html#4253" class="InductiveConstructor">ext#-</a>    <a id="4262" href="Context.Base.html#4279" class="Bound">e</a> <a id="4264" class="Symbol">=</a> <a id="4266" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="4271" class="InductiveConstructor">tt</a>      <a id="4279" href="Context.Base.html#4279" class="Bound">e</a>

<a id="4282" class="Comment">-- Lock-free context extension (w/o locks, Ext flag set to ff)</a>
<a id="4345" class="Comment">--</a>
<a id="4348" class="Comment">-- The modal accessibility relation _◁_ for λ_IK defined in Figure 4</a>
<a id="4417" class="Comment">-- in the paper can equivalently be defined by Δ ◁ Γ = ∃ ΔR. LFExt Γ</a>
<a id="4486" class="Comment">-- (Δ #) ΔR.</a>
<a id="4499" class="Comment">--</a>
<a id="4502" class="Comment">-- Lock-free context extensions are also used to represent sequences</a>
<a id="4571" class="Comment">-- w : Γ ⊆ Γ `, a₁ `, … `, aₙ of drops in the &quot;shift-unbox&quot; conversion</a>
<a id="4642" class="Comment">-- rule unbox t (w · e) ≈ unbox (wkTm w t) e (cf. discussion below</a>
<a id="4709" class="Comment">-- Theorem 7 in the paper).</a>
<a id="LFExt"></a><a id="4737" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="4743" class="Symbol">:</a> <a id="4745" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4749" class="Symbol">→</a> <a id="4751" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4755" class="Symbol">→</a> <a id="4757" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4761" class="Symbol">→</a> <a id="4763" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="4767" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="4773" class="Symbol">=</a> <a id="4775" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="4779" href="Context.Base.html#3896" class="InductiveConstructor">ff</a>

<a id="_◁IK_"></a><a id="4783" href="Context.Base.html#4783" class="Function Operator">_◁IK_</a> <a id="4789" class="Symbol">=</a> <a id="4791" class="Symbol">λ</a> <a id="4793" href="Context.Base.html#4793" class="Bound">Δ</a> <a id="4795" href="Context.Base.html#4795" class="Bound">Γ</a> <a id="4797" class="Symbol">→</a> <a id="4799" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a> <a id="4801" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="4805" class="Symbol">λ</a> <a id="4807" href="Context.Base.html#4807" class="Bound">ΔR</a> <a id="4810" class="Symbol">→</a> <a id="4812" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="4818" href="Context.Base.html#4795" class="Bound">Γ</a> <a id="4820" class="Symbol">(</a><a id="4821" href="Context.Base.html#4793" class="Bound">Δ</a> <a id="4823" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="4824" class="Symbol">)</a> <a id="4826" href="Context.Base.html#4807" class="Bound">ΔR</a>

<a id="4830" class="Comment">-- Arbitrary context extension (possibly w/ locks, Ext flag set to tt)</a>
<a id="4901" class="Comment">--</a>
<a id="4904" class="Comment">-- The modal accessibility relation _◁_ for λ_IS4 defined in Figure 10</a>
<a id="4975" class="Comment">-- in the paper can equivalently be defined by Δ ◁ Γ = ∃ ΔR. CExt Γ Δ</a>
<a id="5045" class="Comment">-- ΔR.</a>
<a id="CExt"></a><a id="5052" href="Context.Base.html#5052" class="Function">CExt</a> <a id="5057" class="Symbol">:</a> <a id="5059" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="5063" class="Symbol">→</a> <a id="5065" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="5069" class="Symbol">→</a> <a id="5071" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="5075" class="Symbol">→</a> <a id="5077" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="5081" href="Context.Base.html#5052" class="Function">CExt</a> <a id="5086" class="Symbol">=</a> <a id="5088" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="5092" href="Context.Base.html#3893" class="InductiveConstructor">tt</a>

<a id="_◁IS4_"></a><a id="5096" href="Context.Base.html#5096" class="Function Operator">_◁IS4_</a> <a id="5103" class="Symbol">=</a> <a id="5105" class="Symbol">λ</a> <a id="5107" href="Context.Base.html#5107" class="Bound">Δ</a> <a id="5109" href="Context.Base.html#5109" class="Bound">Γ</a> <a id="5111" class="Symbol">→</a> <a id="5113" href="Agda.Builtin.Sigma.html#166" class="Record">Σ</a> <a id="5115" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="5119" class="Symbol">λ</a> <a id="5121" href="Context.Base.html#5121" class="Bound">ΔR</a> <a id="5124" class="Symbol">→</a> <a id="5126" href="Context.Base.html#5052" class="Function">CExt</a> <a id="5131" href="Context.Base.html#5109" class="Bound">Γ</a> <a id="5133" href="Context.Base.html#5107" class="Bound">Δ</a> <a id="5135" href="Context.Base.html#5121" class="Bound">ΔR</a>

<a id="5139" class="Keyword">pattern</a> <a id="nil◁"></a><a id="5147" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>    <a id="5155" class="Symbol">=</a> <a id="5157" class="Symbol">_</a> <a id="5159" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5161" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="5165" class="Keyword">pattern</a> <a id="ext◁"></a><a id="5173" href="Context.Base.html#5173" class="InductiveConstructor">ext◁</a>  <a id="5179" href="Context.Base.html#5195" class="Bound">e</a> <a id="5181" class="Symbol">=</a> <a id="5183" class="Symbol">_</a> <a id="5185" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5187" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>     <a id="5195" href="Context.Base.html#5195" class="Bound">e</a>
<a id="5197" class="Keyword">pattern</a> <a id="ext#◁"></a><a id="5205" href="Context.Base.html#5205" class="InductiveConstructor">ext#◁</a> <a id="5211" href="Context.Base.html#5227" class="Bound">e</a> <a id="5213" class="Symbol">=</a> <a id="5215" class="Symbol">_</a> <a id="5217" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5219" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="5224" class="InductiveConstructor">tt</a> <a id="5227" href="Context.Base.html#5227" class="Bound">e</a>

<a id="5230" class="Comment">-- extension that &quot;generates a new context frame&quot;</a>
<a id="5280" class="Keyword">pattern</a> <a id="new◁IK"></a><a id="5288" href="Context.Base.html#5288" class="InductiveConstructor">new◁IK</a>  <a id="5296" class="Symbol">=</a> <a id="5298" class="Symbol">_</a> <a id="5300" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5302" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="5306" class="Keyword">pattern</a> <a id="new◁IS4"></a><a id="5314" href="Context.Base.html#5314" class="InductiveConstructor">new◁IS4</a> <a id="5322" class="Symbol">=</a> <a id="5324" class="Symbol">_</a> <a id="5326" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5328" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="5333" class="InductiveConstructor">tt</a> <a id="5336" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>

<a id="5341" class="Keyword">variable</a>
  <a id="5352" href="Context.Base.html#5352" class="Generalizable">e</a> <a id="5354" href="Context.Base.html#5354" class="Generalizable">e&#39;</a> <a id="5357" href="Context.Base.html#5357" class="Generalizable">e&#39;&#39;</a> <a id="5361" class="Symbol">:</a> <a id="5363" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="5367" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="5369" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5371" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="5374" href="Context.Base.html#627" class="Generalizable">ΓR</a>

<a id="5378" class="Comment">-- embed lock-free extensions into ones that extend with locks</a>
<a id="upLFExt"></a><a id="5441" href="Context.Base.html#5441" class="Function">upLFExt</a> <a id="5449" class="Symbol">:</a> <a id="5451" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="5457" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5459" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="5462" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="5465" class="Symbol">→</a> <a id="5467" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="5471" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="5473" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5475" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="5478" href="Context.Base.html#627" class="Generalizable">ΓR</a>
<a id="5481" href="Context.Base.html#5441" class="Function">upLFExt</a> <a id="5489" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>     <a id="5497" class="Symbol">=</a> <a id="5499" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="5503" href="Context.Base.html#5441" class="Function">upLFExt</a> <a id="5511" class="Symbol">(</a><a id="5512" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="5516" href="Context.Base.html#5516" class="Bound">e</a><a id="5517" class="Symbol">)</a> <a id="5519" class="Symbol">=</a> <a id="5521" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="5525" class="Symbol">(</a><a id="5526" href="Context.Base.html#5441" class="Function">upLFExt</a> <a id="5534" href="Context.Base.html#5516" class="Bound">e</a><a id="5535" class="Symbol">)</a>

<a id="5538" class="Comment">-- left identity of extension</a>
<a id="extLId"></a><a id="5568" href="Context.Base.html#5568" class="Function">extLId</a> <a id="5575" class="Symbol">:</a> <a id="5577" href="Context.Base.html#5052" class="Function">CExt</a> <a id="5582" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5584" href="Context.Base.html#437" class="InductiveConstructor">[]</a> <a id="5587" href="Context.Base.html#598" class="Generalizable">Γ</a>
<a id="5589" href="Context.Base.html#5568" class="Function">extLId</a> <a id="5596" class="Symbol">{</a><a id="5597" class="Argument">Γ</a> <a id="5599" class="Symbol">=</a> <a id="5601" href="Context.Base.html#437" class="InductiveConstructor">[]</a><a id="5603" class="Symbol">}</a>       <a id="5611" class="Symbol">=</a> <a id="5613" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="5617" href="Context.Base.html#5568" class="Function">extLId</a> <a id="5624" class="Symbol">{</a><a id="5625" class="Argument">Γ</a> <a id="5627" class="Symbol">=</a> <a id="5629" href="Context.Base.html#5629" class="Bound Operator">_Γ</a> <a id="5632" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="5635" href="Context.Base.html#5635" class="Bound Operator">_a</a><a id="5637" class="Symbol">}</a> <a id="5639" class="Symbol">=</a> <a id="5641" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>     <a id="5649" href="Context.Base.html#5568" class="Function">extLId</a>
<a id="5656" href="Context.Base.html#5568" class="Function">extLId</a> <a id="5663" class="Symbol">{</a><a id="5664" class="Argument">Γ</a> <a id="5666" class="Symbol">=</a> <a id="5668" href="Context.Base.html#5668" class="Bound Operator">_Γ</a> <a id="5671" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="5672" class="Symbol">}</a>     <a id="5678" class="Symbol">=</a> <a id="5680" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="5685" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="5688" href="Context.Base.html#5568" class="Function">extLId</a>

<a id="5696" class="Comment">-- right identity of extension</a>
<a id="extRId"></a><a id="5727" href="Context.Base.html#5727" class="Function">extRId</a> <a id="5734" class="Symbol">:</a> <a id="5736" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="5740" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="5742" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5744" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5746" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
<a id="5749" href="Context.Base.html#5727" class="Function">extRId</a> <a id="5756" class="Symbol">=</a> <a id="5758" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>

<a id="5763" class="Comment">-- extension that &quot;generates a fresh variable&quot;</a>
<a id="freshExt"></a><a id="5810" href="Context.Base.html#5810" class="Function">freshExt</a> <a id="5819" class="Symbol">:</a> <a id="5821" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="5825" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="5827" class="Symbol">(</a><a id="5828" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5830" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="5833" href="Context.Base.html#318" class="Generalizable">a</a><a id="5834" class="Symbol">)</a> <a id="5836" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="5838" class="Symbol">(</a><a id="5839" href="Context.Base.html#437" class="InductiveConstructor">[]</a> <a id="5842" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="5845" href="Context.Base.html#318" class="Generalizable">a</a><a id="5846" class="Symbol">)</a>
<a id="5848" href="Context.Base.html#5810" class="Function">freshExt</a> <a id="5857" class="Symbol">=</a> <a id="5859" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="5863" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>

<a id="freshExt[_]"></a><a id="5868" href="Context.Base.html#5868" class="Function Operator">freshExt[_]</a> <a id="5880" class="Symbol">=</a> <a id="5882" class="Symbol">λ</a> <a id="5884" class="Symbol">{</a><a id="5885" href="Context.Base.html#5885" class="Bound">θ</a><a id="5886" class="Symbol">}</a> <a id="5888" class="Symbol">{</a><a id="5889" href="Context.Base.html#5889" class="Bound">Γ</a><a id="5890" class="Symbol">}</a> <a id="5892" href="Context.Base.html#5892" class="Bound">a</a> <a id="5894" class="Symbol">→</a> <a id="5896" href="Context.Base.html#5810" class="Function">freshExt</a> <a id="5905" class="Symbol">{</a><a id="5906" href="Context.Base.html#5885" class="Bound">θ</a><a id="5907" class="Symbol">}</a> <a id="5909" class="Symbol">{</a><a id="5910" href="Context.Base.html#5889" class="Bound">Γ</a><a id="5911" class="Symbol">}</a> <a id="5913" class="Symbol">{</a><a id="5914" href="Context.Base.html#5892" class="Bound">a</a><a id="5915" class="Symbol">}</a>

<a id="5918" class="Comment">-- lock-free extensions yield a &quot;right&quot; weakening (i.e., adding variables on the right)</a>
<a id="LFExtToWk"></a><a id="6006" href="Context.Base.html#6006" class="Function">LFExtToWk</a> <a id="6016" class="Symbol">:</a> <a id="6018" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6024" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6026" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6029" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="6032" class="Symbol">→</a> <a id="6034" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6037" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="6039" href="Context.Base.html#598" class="Generalizable">Γ</a>
<a id="6041" href="Context.Base.html#6006" class="Function">LFExtToWk</a> <a id="6051" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>     <a id="6059" class="Symbol">=</a> <a id="6061" href="Context.Base.html#2129" class="Function">idWk</a>
<a id="6066" href="Context.Base.html#6006" class="Function">LFExtToWk</a> <a id="6076" class="Symbol">(</a><a id="6077" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6081" href="Context.Base.html#6081" class="Bound">e</a><a id="6082" class="Symbol">)</a> <a id="6084" class="Symbol">=</a> <a id="6086" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="6091" class="Symbol">(</a><a id="6092" href="Context.Base.html#6006" class="Function">LFExtToWk</a> <a id="6102" href="Context.Base.html#6081" class="Bound">e</a><a id="6103" class="Symbol">)</a>

<a id="6106" class="Comment">-- extension is assocative</a>
<a id="extRAssoc"></a><a id="6133" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6143" class="Symbol">:</a> <a id="6145" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="6149" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="6151" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6154" href="Context.Base.html#619" class="Generalizable">ΓLL</a> <a id="6158" href="Context.Base.html#623" class="Generalizable">ΓLR</a> <a id="6162" class="Symbol">→</a> <a id="6164" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="6168" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="6170" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6172" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6175" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="6178" class="Symbol">→</a> <a id="6180" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="6184" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="6186" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6188" href="Context.Base.html#619" class="Generalizable">ΓLL</a> <a id="6192" class="Symbol">(</a><a id="6193" href="Context.Base.html#623" class="Generalizable">ΓLR</a> <a id="6197" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="6200" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="6202" class="Symbol">)</a>
<a id="6204" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6214" href="Context.Base.html#6214" class="Bound">el</a> <a id="6217" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>         <a id="6229" class="Symbol">=</a> <a id="6231" href="Context.Base.html#6214" class="Bound">el</a>
<a id="6234" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6244" href="Context.Base.html#6244" class="Bound">el</a> <a id="6247" class="Symbol">(</a><a id="6248" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="6255" href="Context.Base.html#6255" class="Bound">er</a><a id="6257" class="Symbol">)</a> <a id="6259" class="Symbol">=</a> <a id="6261" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="6268" class="Symbol">(</a><a id="6269" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6279" href="Context.Base.html#6244" class="Bound">el</a> <a id="6282" href="Context.Base.html#6255" class="Bound">er</a><a id="6284" class="Symbol">)</a>
<a id="6286" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6296" href="Context.Base.html#6296" class="Bound">el</a> <a id="6299" class="Symbol">(</a><a id="6300" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="6305" href="Context.Base.html#6305" class="Bound">x</a> <a id="6307" href="Context.Base.html#6307" class="Bound">er</a><a id="6309" class="Symbol">)</a> <a id="6311" class="Symbol">=</a> <a id="6313" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="6318" href="Context.Base.html#6305" class="Bound">x</a> <a id="6320" class="Symbol">(</a><a id="6321" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="6331" href="Context.Base.html#6296" class="Bound">el</a> <a id="6334" href="Context.Base.html#6307" class="Bound">er</a><a id="6336" class="Symbol">)</a>

<a id="_∙Ext_"></a><a id="6339" href="Context.Base.html#6339" class="Function Operator">_∙Ext_</a> <a id="6346" class="Symbol">=</a> <a id="6348" href="Context.Base.html#6133" class="Function">extRAssoc</a>

<a id="6359" class="Comment">-------------------------------------</a>
<a id="6397" class="Comment">-- Operations on lock-free extensions</a>
<a id="6435" class="Comment">-------------------------------------</a>

<a id="6474" class="Comment">-- weaken the extension of a context</a>
<a id="wkLFExt"></a><a id="6511" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6519" class="Symbol">:</a> <a id="6521" class="Symbol">(</a><a id="6522" href="Context.Base.html#6522" class="Bound">e</a> <a id="6524" class="Symbol">:</a> <a id="6526" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6532" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6534" class="Symbol">(</a><a id="6535" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6538" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="6539" class="Symbol">)</a> <a id="6541" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="6543" class="Symbol">)</a> <a id="6545" class="Symbol">→</a> <a id="6547" class="Symbol">(</a><a id="6548" href="Context.Base.html#6548" class="Bound">w</a> <a id="6550" class="Symbol">:</a> <a id="6552" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6554" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="6556" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="6558" class="Symbol">)</a> <a id="6560" class="Symbol">→</a> <a id="6562" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6568" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="6571" class="Symbol">((</a><a id="6573" href="Context.Base.html#1100" class="Function">←#</a> <a id="6576" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="6578" class="Symbol">)</a> <a id="6580" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="6581" class="Symbol">)</a> <a id="6583" class="Symbol">(</a><a id="6584" href="Context.Base.html#1212" class="Function">#→</a> <a id="6587" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="6589" class="Symbol">)</a>
<a id="6591" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6599" href="Context.Base.html#6599" class="Bound">e</a>       <a id="6607" class="Symbol">(</a><a id="6608" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="6614" href="Context.Base.html#6614" class="Bound">w</a><a id="6615" class="Symbol">)</a> <a id="6617" class="Symbol">=</a> <a id="6619" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6623" class="Symbol">(</a><a id="6624" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6632" href="Context.Base.html#6599" class="Bound">e</a> <a id="6634" href="Context.Base.html#6614" class="Bound">w</a><a id="6635" class="Symbol">)</a>
<a id="6637" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6645" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>     <a id="6653" class="Symbol">(</a><a id="6654" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="6660" href="Context.Base.html#6660" class="Bound">w</a><a id="6661" class="Symbol">)</a> <a id="6663" class="Symbol">=</a> <a id="6665" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="6669" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6677" class="Symbol">(</a><a id="6678" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6682" href="Context.Base.html#6682" class="Bound">e</a><a id="6683" class="Symbol">)</a> <a id="6685" class="Symbol">(</a><a id="6686" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="6692" href="Context.Base.html#6692" class="Bound">w</a><a id="6693" class="Symbol">)</a> <a id="6695" class="Symbol">=</a> <a id="6697" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6701" class="Symbol">(</a><a id="6702" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="6710" href="Context.Base.html#6682" class="Bound">e</a> <a id="6712" href="Context.Base.html#6692" class="Bound">w</a><a id="6713" class="Symbol">)</a>

<a id="6716" class="Comment">-- left weaken the (lock-free) extension of a context</a>
<a id="leftWkLFExt"></a><a id="6770" href="Context.Base.html#6770" class="Function">leftWkLFExt</a> <a id="6782" class="Symbol">:</a> <a id="6784" class="Symbol">(</a><a id="6785" href="Context.Base.html#6785" class="Bound">e</a> <a id="6787" class="Symbol">:</a> <a id="6789" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6795" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6797" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6800" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="6802" class="Symbol">)</a> <a id="6804" class="Symbol">→</a> <a id="6806" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6812" class="Symbol">(</a><a id="6813" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="6815" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="6818" href="Context.Base.html#598" class="Generalizable">Γ</a><a id="6819" class="Symbol">)</a> <a id="6821" class="Symbol">(</a><a id="6822" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="6824" href="Context.Base.html#849" class="Function Operator">,,</a> <a id="6827" href="Context.Base.html#607" class="Generalizable">ΓL</a><a id="6829" class="Symbol">)</a> <a id="6831" href="Context.Base.html#627" class="Generalizable">ΓR</a>
<a id="6834" href="Context.Base.html#6770" class="Function">leftWkLFExt</a> <a id="6846" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>     <a id="6854" class="Symbol">=</a> <a id="6856" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="6860" href="Context.Base.html#6770" class="Function">leftWkLFExt</a> <a id="6872" class="Symbol">(</a><a id="6873" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6877" href="Context.Base.html#6877" class="Bound">e</a><a id="6878" class="Symbol">)</a> <a id="6880" class="Symbol">=</a> <a id="6882" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="6886" class="Symbol">(</a><a id="6887" href="Context.Base.html#6770" class="Function">leftWkLFExt</a> <a id="6899" href="Context.Base.html#6877" class="Bound">e</a><a id="6900" class="Symbol">)</a>

<a id="6903" class="Comment">-- slice a weakening to the left of a lock</a>
<a id="sliceLeft"></a><a id="6946" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="6956" class="Symbol">:</a> <a id="6958" class="Symbol">(</a><a id="6959" href="Context.Base.html#6959" class="Bound">e</a> <a id="6961" class="Symbol">:</a> <a id="6963" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="6969" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6971" class="Symbol">(</a><a id="6972" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="6975" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="6976" class="Symbol">)</a> <a id="6978" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="6980" class="Symbol">)</a> <a id="6982" class="Symbol">→</a> <a id="6984" class="Symbol">(</a><a id="6985" href="Context.Base.html#6985" class="Bound">w</a> <a id="6987" class="Symbol">:</a> <a id="6989" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="6991" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="6993" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="6995" class="Symbol">)</a> <a id="6997" class="Symbol">→</a> <a id="6999" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="7002" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="7004" href="Context.Base.html#1100" class="Function">←#</a> <a id="7007" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a>
<a id="7010" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="7020" href="Context.Base.html#7020" class="Bound">e</a>       <a id="7028" class="Symbol">(</a><a id="7029" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="7035" href="Context.Base.html#7035" class="Bound">w</a><a id="7036" class="Symbol">)</a> <a id="7038" class="Symbol">=</a> <a id="7040" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="7050" href="Context.Base.html#7020" class="Bound">e</a> <a id="7052" href="Context.Base.html#7035" class="Bound">w</a>
<a id="7054" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="7064" class="Symbol">(</a><a id="7065" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="7069" href="Context.Base.html#7069" class="Bound">e</a><a id="7070" class="Symbol">)</a> <a id="7072" class="Symbol">(</a><a id="7073" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="7079" href="Context.Base.html#7079" class="Bound">w</a><a id="7080" class="Symbol">)</a> <a id="7082" class="Symbol">=</a> <a id="7084" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="7094" href="Context.Base.html#7069" class="Bound">e</a> <a id="7096" href="Context.Base.html#7079" class="Bound">w</a>
<a id="7098" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="7108" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>     <a id="7116" class="Symbol">(</a><a id="7117" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="7123" href="Context.Base.html#7123" class="Bound">w</a><a id="7124" class="Symbol">)</a> <a id="7126" class="Symbol">=</a> <a id="7128" href="Context.Base.html#7123" class="Bound">w</a>

<a id="7131" class="Comment">-- slice a weakening to the right of a lock</a>
<a id="sliceRight"></a><a id="7175" href="Context.Base.html#7175" class="Function">sliceRight</a> <a id="7186" class="Symbol">:</a> <a id="7188" class="Symbol">(</a><a id="7189" href="Context.Base.html#7189" class="Bound">e</a> <a id="7191" class="Symbol">:</a> <a id="7193" href="Context.Base.html#4737" class="Function">LFExt</a> <a id="7199" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="7201" class="Symbol">(</a><a id="7202" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="7205" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="7206" class="Symbol">)</a> <a id="7208" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="7210" class="Symbol">)</a> <a id="7212" class="Symbol">→</a> <a id="7214" class="Symbol">(</a><a id="7215" href="Context.Base.html#7215" class="Bound">w</a> <a id="7217" class="Symbol">:</a> <a id="7219" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="7221" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="7223" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="7225" class="Symbol">)</a> <a id="7227" class="Symbol">→</a> <a id="7229" href="Context.Base.html#1100" class="Function">←#</a> <a id="7232" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="7235" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a> <a id="7237" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="7239" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a>
<a id="7242" href="Context.Base.html#7175" class="Function">sliceRight</a> <a id="7253" href="Context.Base.html#7253" class="Bound">e</a> <a id="7255" href="Context.Base.html#7255" class="Bound">w</a> <a id="7257" class="Symbol">=</a> <a id="7259" href="Context.Base.html#6006" class="Function">LFExtToWk</a> <a id="7269" class="Symbol">(</a><a id="7270" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="7278" href="Context.Base.html#7253" class="Bound">e</a> <a id="7280" href="Context.Base.html#7255" class="Bound">w</a><a id="7281" class="Symbol">)</a>

<a id="7284" class="Comment">-----------------------------------</a>
<a id="7320" class="Comment">-- Operations on general extensions</a>
<a id="7356" class="Comment">-----------------------------------</a>

<a id="◁IS4-refl"></a><a id="7393" href="Context.Base.html#7393" class="Function">◁IS4-refl</a> <a id="7403" class="Symbol">:</a> <a id="7405" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="7415" href="Context.Base.html#5096" class="Function Operator">_◁IS4_</a>
<a id="7422" href="Context.Base.html#7393" class="Function">◁IS4-refl</a> <a id="7432" class="Symbol">=</a> <a id="7434" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>

<a id="◁IS4-trans"></a><a id="7440" href="Context.Base.html#7440" class="Function">◁IS4-trans</a> <a id="7451" class="Symbol">:</a> <a id="7453" href="Relation.Binary.Definitions.html#1866" class="Function">Transitive</a> <a id="7464" href="Context.Base.html#5096" class="Function Operator">_◁IS4_</a>
<a id="7471" href="Context.Base.html#7440" class="Function">◁IS4-trans</a> <a id="7482" class="Symbol">(_</a> <a id="7485" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7487" href="Context.Base.html#7487" class="Bound">Γ◁Δ</a><a id="7490" class="Symbol">)</a> <a id="7492" class="Symbol">(_</a> <a id="7495" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7497" href="Context.Base.html#7497" class="Bound">Δ◁Ε</a><a id="7500" class="Symbol">)</a> <a id="7502" class="Symbol">=</a> <a id="7504" class="Symbol">_</a> <a id="7506" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7508" href="Context.Base.html#6133" class="Function">extRAssoc</a> <a id="7518" href="Context.Base.html#7487" class="Bound">Γ◁Δ</a> <a id="7522" href="Context.Base.html#7497" class="Bound">Δ◁Ε</a>

<a id="7527" class="Keyword">private</a>
  <a id="7537" class="Comment">-- we don&#39;t use factor1 anymore</a>
  <a id="factor1"></a><a id="7571" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7579" class="Symbol">:</a> <a id="7581" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="7583" href="Context.Base.html#5096" class="Function Operator">◁IS4</a> <a id="7588" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="7590" class="Symbol">→</a> <a id="7592" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="7595" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="7597" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="7599" class="Symbol">→</a> <a id="7601" href="Data.Product.html#1369" class="Function">∃</a> <a id="7603" class="Symbol">λ</a> <a id="7605" href="Context.Base.html#7605" class="Bound">Δ&#39;</a> <a id="7608" class="Symbol">→</a> <a id="7610" href="Context.Base.html#7605" class="Bound">Δ&#39;</a> <a id="7613" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="7615" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="7617" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="7619" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="7622" href="Context.Base.html#5096" class="Function Operator">◁IS4</a> <a id="7627" href="Context.Base.html#7605" class="Bound">Δ&#39;</a>
  <a id="7632" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7640" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>        <a id="7652" href="Context.Base.html#7652" class="Bound">Γ&#39;⊆Γ</a>
    <a id="7661" class="Symbol">=</a> <a id="7663" class="Symbol">_</a> <a id="7665" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7667" href="Context.Base.html#7652" class="Bound">Γ&#39;⊆Γ</a> <a id="7672" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7674" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>
  <a id="7681" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7689" class="Symbol">(</a><a id="7690" href="Context.Base.html#5173" class="InductiveConstructor">ext◁</a>  <a id="7696" href="Context.Base.html#7696" class="Bound">Γ◁Δ</a><a id="7699" class="Symbol">)</a> <a id="7701" href="Context.Base.html#7701" class="Bound">Γ&#39;⊆Γ</a> <a id="7706" class="Keyword">with</a> <a id="7711" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7719" class="Symbol">(_</a> <a id="7722" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7724" href="Context.Base.html#7696" class="Bound">Γ◁Δ</a><a id="7727" class="Symbol">)</a> <a id="7729" href="Context.Base.html#7701" class="Bound">Γ&#39;⊆Γ</a>
  <a id="7736" class="Symbol">...</a> <a id="7740" class="Symbol">|</a> <a id="7742" href="Context.Base.html#7742" class="Bound">Δ&#39;</a> <a id="7745" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7747" href="Context.Base.html#7747" class="Bound">Δ&#39;⊆Δ</a> <a id="7752" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7754" href="Context.Base.html#7754" class="Bound">Γ&#39;◁Δ&#39;</a>
    <a id="7764" class="Symbol">=</a> <a id="7766" href="Context.Base.html#7742" class="Bound">Δ&#39;</a> <a id="7769" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7771" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="7776" href="Context.Base.html#7747" class="Bound">Δ&#39;⊆Δ</a> <a id="7781" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7783" href="Context.Base.html#7754" class="Bound">Γ&#39;◁Δ&#39;</a>
  <a id="7791" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7799" class="Symbol">(</a><a id="7800" href="Context.Base.html#5205" class="InductiveConstructor">ext#◁</a> <a id="7806" href="Context.Base.html#7806" class="Bound">Γ◁Δ</a><a id="7809" class="Symbol">)</a> <a id="7811" href="Context.Base.html#7811" class="Bound">Γ&#39;⊆Γ</a> <a id="7816" class="Keyword">with</a> <a id="7821" href="Context.Base.html#7571" class="Function">factor1</a> <a id="7829" class="Symbol">(_</a> <a id="7832" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7834" href="Context.Base.html#7806" class="Bound">Γ◁Δ</a><a id="7837" class="Symbol">)</a> <a id="7839" href="Context.Base.html#7811" class="Bound">Γ&#39;⊆Γ</a>
  <a id="7846" class="Symbol">...</a> <a id="7850" class="Symbol">|</a> <a id="7852" href="Context.Base.html#7852" class="Bound">Δ&#39;</a> <a id="7855" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7857" href="Context.Base.html#7857" class="Bound">Δ&#39;⊆Δ</a> <a id="7862" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7864" href="Context.Base.html#7864" class="Bound">Γ&#39;◁Δ&#39;</a>
    <a id="7874" class="Symbol">=</a> <a id="7876" href="Context.Base.html#7852" class="Bound">Δ&#39;</a> <a id="7879" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a> <a id="7881" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7883" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="7889" href="Context.Base.html#7857" class="Bound">Δ&#39;⊆Δ</a> <a id="7894" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7896" href="Context.Base.html#7440" class="Function">◁IS4-trans</a> <a id="7907" href="Context.Base.html#7864" class="Bound">Γ&#39;◁Δ&#39;</a> <a id="7913" class="Symbol">(</a><a id="7914" href="Context.Base.html#5205" class="InductiveConstructor">ext#◁</a> <a id="7920" href="Context.Base.html#5727" class="Function">extRId</a><a id="7926" class="Symbol">)</a>

  <a id="7931" class="Comment">-- not used directly, but serves as a specification of</a>
  <a id="7988" class="Comment">-- what is expected from factorExt and factorWk</a>
  <a id="factor2"></a><a id="8038" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8046" class="Symbol">:</a> <a id="8048" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8050" href="Context.Base.html#5096" class="Function Operator">◁IS4</a> <a id="8055" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="8057" class="Symbol">→</a> <a id="8059" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="8061" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="8063" href="Context.Base.html#657" class="Generalizable">Δ&#39;</a> <a id="8066" class="Symbol">→</a> <a id="8068" href="Data.Product.html#1369" class="Function">∃</a> <a id="8070" class="Symbol">λ</a> <a id="8072" href="Context.Base.html#8072" class="Bound">Γ&#39;</a> <a id="8075" class="Symbol">→</a> <a id="8077" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8079" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="8081" href="Context.Base.html#8072" class="Bound">Γ&#39;</a> <a id="8084" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="8086" href="Context.Base.html#8072" class="Bound">Γ&#39;</a> <a id="8089" href="Context.Base.html#5096" class="Function Operator">◁IS4</a> <a id="8094" href="Context.Base.html#657" class="Generalizable">Δ&#39;</a>
  <a id="8099" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8107" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>        <a id="8119" href="Context.Base.html#8119" class="Bound">Δ⊆Δ&#39;</a>
    <a id="8128" class="Symbol">=</a> <a id="8130" class="Symbol">_</a> <a id="8132" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8134" href="Context.Base.html#8119" class="Bound">Δ⊆Δ&#39;</a> <a id="8139" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8141" href="Context.Base.html#5147" class="InductiveConstructor">nil◁</a>
  <a id="8148" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8156" class="Symbol">(</a><a id="8157" href="Context.Base.html#5173" class="InductiveConstructor">ext◁</a>  <a id="8163" href="Context.Base.html#8163" class="Bound">Γ◁Δ</a><a id="8166" class="Symbol">)</a> <a id="8168" href="Context.Base.html#8168" class="Bound">Δ⊆Δ&#39;</a>
    <a id="8177" class="Symbol">=</a> <a id="8179" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8187" class="Symbol">(_</a> <a id="8190" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8192" href="Context.Base.html#8163" class="Bound">Γ◁Δ</a><a id="8195" class="Symbol">)</a> <a id="8197" class="Symbol">(</a><a id="8198" href="Context.Base.html#2446" class="Function">fresh</a> <a id="8204" href="Context.Base.html#2203" class="Function Operator">∙</a> <a id="8206" href="Context.Base.html#8168" class="Bound">Δ⊆Δ&#39;</a><a id="8210" class="Symbol">)</a>
  <a id="8214" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8222" class="Symbol">(</a><a id="8223" href="Context.Base.html#5205" class="InductiveConstructor">ext#◁</a> <a id="8229" href="Context.Base.html#8229" class="Bound">Γ◁Δ</a><a id="8232" class="Symbol">)</a> <a id="8234" href="Context.Base.html#8234" class="Bound">Δ⊆Δ&#39;</a> <a id="8239" class="Keyword">with</a> <a id="8244" href="Context.Base.html#8038" class="Function">factor2</a> <a id="8252" class="Symbol">(_</a> <a id="8255" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8257" href="Context.Base.html#8229" class="Bound">Γ◁Δ</a><a id="8260" class="Symbol">)</a> <a id="8262" class="Symbol">(</a><a id="8263" href="Context.Base.html#6946" class="Function">sliceLeft</a> <a id="8273" href="Context.Base.html#5727" class="Function">extRId</a> <a id="8280" href="Context.Base.html#8234" class="Bound">Δ⊆Δ&#39;</a><a id="8284" class="Symbol">)</a>
  <a id="8288" class="Symbol">...</a> <a id="8292" class="Symbol">|</a> <a id="8294" href="Context.Base.html#8294" class="Bound">Γ&#39;</a> <a id="8297" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8299" href="Context.Base.html#8299" class="Bound">Γ⊆Γ&#39;</a> <a id="8304" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8306" href="Context.Base.html#8306" class="Bound">Γ&#39;◁Δ&#39;</a>
    <a id="8316" class="Symbol">=</a> <a id="8318" href="Context.Base.html#8294" class="Bound">Γ&#39;</a> <a id="8321" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8323" href="Context.Base.html#8299" class="Bound">Γ⊆Γ&#39;</a> <a id="8328" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8330" href="Context.Base.html#7440" class="Function">◁IS4-trans</a> <a id="8341" href="Context.Base.html#8306" class="Bound">Γ&#39;◁Δ&#39;</a> <a id="8347" class="Symbol">(</a><a id="8348" href="Context.Base.html#7440" class="Function">◁IS4-trans</a> <a id="8359" class="Symbol">(</a><a id="8360" href="Context.Base.html#5205" class="InductiveConstructor">ext#◁</a> <a id="8366" href="Context.Base.html#5727" class="Function">extRId</a><a id="8372" class="Symbol">)</a> <a id="8374" class="Symbol">(_</a> <a id="8377" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8379" href="Context.Base.html#5441" class="Function">upLFExt</a> <a id="8387" class="Symbol">(</a><a id="8388" href="Context.Base.html#6511" class="Function">wkLFExt</a> <a id="8396" href="Context.Base.html#5727" class="Function">extRId</a> <a id="8403" class="Bound">Δ⊆Δ&#39;</a><a id="8407" class="Symbol">)))</a>

<a id="8412" class="Comment">-- &quot;Left&quot; context of factoring (see type of factorWk and factorExt)</a>
<a id="8480" class="Comment">-- lCtx e w == proj₁ (factor2 (_ , e) w)</a>
<a id="lCtx"></a><a id="8521" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8526" class="Symbol">:</a> <a id="8528" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="8532" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="8534" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8536" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="8539" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="8542" class="Symbol">→</a> <a id="8544" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8546" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="8548" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="8551" class="Symbol">→</a> <a id="8553" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="8557" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8562" class="Symbol">{</a><a id="8563" class="Argument">Γ</a> <a id="8565" class="Symbol">=</a> <a id="8567" href="Context.Base.html#8567" class="Bound">Γ</a><a id="8568" class="Symbol">}</a>      <a id="8575" class="Symbol">{</a><a id="8576" class="Argument">Γ&#39;</a> <a id="8579" class="Symbol">=</a> <a id="8581" href="Context.Base.html#8581" class="Bound">Γ&#39;</a><a id="8583" class="Symbol">}</a>       <a id="8591" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>        <a id="8602" href="Context.Base.html#8602" class="Bound">w</a>
  <a id="8606" class="Symbol">=</a> <a id="8608" href="Context.Base.html#8581" class="Bound">Γ&#39;</a>
<a id="8611" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8616" class="Symbol">{</a><a id="8617" class="Argument">Γ</a> <a id="8619" class="Symbol">=</a> <a id="8621" href="Context.Base.html#8621" class="Bound">Γ</a> <a id="8623" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="8626" href="Context.Base.html#8626" class="Bound">a</a><a id="8627" class="Symbol">}</a> <a id="8629" class="Symbol">{</a><a id="8630" class="Argument">Γ&#39;</a> <a id="8633" class="Symbol">=</a> <a id="8635" href="Context.Base.html#8635" class="Bound">Γ&#39;</a> <a id="8638" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="8641" href="Context.Base.html#8641" class="Bound">b</a><a id="8642" class="Symbol">}</a>  <a id="8645" class="Symbol">(</a><a id="8646" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="8650" href="Context.Base.html#8650" class="Bound">e</a><a id="8651" class="Symbol">)</a>    <a id="8656" class="Symbol">(</a><a id="8657" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="8662" href="Context.Base.html#8662" class="Bound">w</a><a id="8663" class="Symbol">)</a>
  <a id="8667" class="Symbol">=</a> <a id="8669" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8674" class="Symbol">(</a><a id="8675" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="8679" href="Context.Base.html#8650" class="Bound">e</a><a id="8680" class="Symbol">)</a> <a id="8682" href="Context.Base.html#8662" class="Bound">w</a>
<a id="8684" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8689" class="Symbol">{</a><a id="8690" class="Argument">Γ</a> <a id="8692" class="Symbol">=</a> <a id="8694" href="Context.Base.html#8694" class="Bound">Γ</a> <a id="8696" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="8699" href="Context.Base.html#8699" class="Bound">a</a><a id="8700" class="Symbol">}</a> <a id="8702" class="Symbol">{</a><a id="8703" class="Argument">Γ&#39;</a> <a id="8706" class="Symbol">=</a> <a id="8708" href="Context.Base.html#8708" class="Bound">Γ&#39;</a> <a id="8711" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="8714" class="DottedPattern Symbol">.</a><a id="8715" href="Context.Base.html#8699" class="DottedPattern Bound">a</a><a id="8716" class="Symbol">}</a> <a id="8718" class="Symbol">(</a><a id="8719" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="8723" href="Context.Base.html#8723" class="Bound">e</a><a id="8724" class="Symbol">)</a>    <a id="8729" class="Symbol">(</a><a id="8730" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="8735" href="Context.Base.html#8735" class="Bound">w</a><a id="8736" class="Symbol">)</a>
  <a id="8740" class="Symbol">=</a> <a id="8742" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8747" href="Context.Base.html#8723" class="Bound">e</a> <a id="8749" href="Context.Base.html#8735" class="Bound">w</a>
<a id="8751" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8756" class="Symbol">{</a><a id="8757" class="Argument">Γ</a> <a id="8759" class="Symbol">=</a> <a id="8761" href="Context.Base.html#8761" class="Bound">Γ</a> <a id="8763" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="8764" class="Symbol">}</a> <a id="8766" class="Symbol">{</a><a id="8767" class="Argument">Γ&#39;</a> <a id="8770" class="Symbol">=</a> <a id="8772" href="Context.Base.html#8772" class="Bound">Γ&#39;</a> <a id="8775" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="8778" href="Context.Base.html#8778" class="Bound">a</a><a id="8779" class="Symbol">}</a>     <a id="8785" class="Symbol">(</a><a id="8786" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="8791" href="Context.Base.html#8791" class="Bound">f</a> <a id="8793" href="Context.Base.html#8793" class="Bound">e</a><a id="8794" class="Symbol">)</a> <a id="8796" class="Symbol">(</a><a id="8797" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="8802" href="Context.Base.html#8802" class="Bound">w</a><a id="8803" class="Symbol">)</a>
  <a id="8807" class="Symbol">=</a> <a id="8809" href="Context.Base.html#8521" class="Function">lCtx</a>  <a id="8815" class="Symbol">(</a><a id="8816" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="8821" href="Context.Base.html#8791" class="Bound">f</a> <a id="8823" href="Context.Base.html#8793" class="Bound">e</a><a id="8824" class="Symbol">)</a> <a id="8826" href="Context.Base.html#8802" class="Bound">w</a>
<a id="8828" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8833" class="Symbol">{</a><a id="8834" class="Argument">Γ</a> <a id="8836" class="Symbol">=</a> <a id="8838" href="Context.Base.html#8838" class="Bound">Γ</a> <a id="8840" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="8841" class="Symbol">}</a> <a id="8843" class="Symbol">{</a><a id="8844" class="Argument">Γ&#39;</a> <a id="8847" class="Symbol">=</a> <a id="8849" href="Context.Base.html#8849" class="Bound">Γ&#39;</a> <a id="8852" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="8853" class="Symbol">}</a>        <a id="8862" class="Symbol">(</a><a id="8863" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="8868" href="Context.Base.html#8868" class="Bound">f</a> <a id="8870" href="Context.Base.html#8870" class="Bound">e</a><a id="8871" class="Symbol">)</a> <a id="8873" class="Symbol">(</a><a id="8874" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="8880" href="Context.Base.html#8880" class="Bound">w</a><a id="8881" class="Symbol">)</a>
  <a id="8885" class="Symbol">=</a> <a id="8887" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="8892" href="Context.Base.html#8870" class="Bound">e</a> <a id="8894" href="Context.Base.html#8880" class="Bound">w</a>

<a id="8897" class="Comment">-- factorWk e w == proj₁ (proj₂ (factor2 (_ , e) w))</a>
<a id="factorWk"></a><a id="8950" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="8959" class="Symbol">:</a> <a id="8961" class="Symbol">(</a><a id="8962" href="Context.Base.html#8962" class="Bound">e</a> <a id="8964" class="Symbol">:</a> <a id="8966" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="8970" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="8972" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8974" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="8977" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="8979" class="Symbol">)</a> <a id="8981" class="Symbol">→</a> <a id="8983" class="Symbol">(</a><a id="8984" href="Context.Base.html#8984" class="Bound">w</a> <a id="8986" class="Symbol">:</a> <a id="8988" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="8990" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="8992" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="8994" class="Symbol">)</a> <a id="8996" class="Symbol">→</a> <a id="8998" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="9001" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="9003" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="9008" href="Context.Base.html#8962" class="Bound">e</a> <a id="9010" href="Context.Base.html#8984" class="Bound">w</a>
<a id="9012" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9021" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>        <a id="9032" href="Context.Base.html#9032" class="Bound">w</a>         <a id="9042" class="Symbol">=</a> <a id="9044" href="Context.Base.html#9032" class="Bound">w</a>
<a id="9046" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9055" class="Symbol">(</a><a id="9056" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9060" href="Context.Base.html#9060" class="Bound">e</a><a id="9061" class="Symbol">)</a>    <a id="9066" class="Symbol">(</a><a id="9067" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="9072" href="Context.Base.html#9072" class="Bound">w</a><a id="9073" class="Symbol">)</a>  <a id="9076" class="Symbol">=</a> <a id="9078" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9087" class="Symbol">(</a><a id="9088" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9092" href="Context.Base.html#9060" class="Bound">e</a><a id="9093" class="Symbol">)</a> <a id="9095" href="Context.Base.html#9072" class="Bound">w</a>
<a id="9097" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9106" class="Symbol">(</a><a id="9107" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9111" href="Context.Base.html#9111" class="Bound">e</a><a id="9112" class="Symbol">)</a>    <a id="9117" class="Symbol">(</a><a id="9118" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="9123" href="Context.Base.html#9123" class="Bound">w</a><a id="9124" class="Symbol">)</a>  <a id="9127" class="Symbol">=</a> <a id="9129" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9138" href="Context.Base.html#9111" class="Bound">e</a> <a id="9140" href="Context.Base.html#9123" class="Bound">w</a>
<a id="9142" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9151" class="Symbol">(</a><a id="9152" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9157" href="Context.Base.html#9157" class="Bound">f</a> <a id="9159" href="Context.Base.html#9159" class="Bound">e</a><a id="9160" class="Symbol">)</a> <a id="9162" class="Symbol">(</a><a id="9163" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="9168" href="Context.Base.html#9168" class="Bound">w</a><a id="9169" class="Symbol">)</a>  <a id="9172" class="Symbol">=</a> <a id="9174" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9183" class="Symbol">(</a><a id="9184" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9189" href="Context.Base.html#9157" class="Bound">f</a> <a id="9191" href="Context.Base.html#9159" class="Bound">e</a><a id="9192" class="Symbol">)</a> <a id="9194" href="Context.Base.html#9168" class="Bound">w</a>
<a id="9196" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9205" class="Symbol">(</a><a id="9206" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9211" href="Context.Base.html#9211" class="Bound">f</a> <a id="9213" href="Context.Base.html#9213" class="Bound">e</a><a id="9214" class="Symbol">)</a> <a id="9216" class="Symbol">(</a><a id="9217" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="9223" href="Context.Base.html#9223" class="Bound">w</a><a id="9224" class="Symbol">)</a> <a id="9226" class="Symbol">=</a> <a id="9228" href="Context.Base.html#8950" class="Function">factorWk</a> <a id="9237" href="Context.Base.html#9213" class="Bound">e</a> <a id="9239" href="Context.Base.html#9223" class="Bound">w</a>

<a id="9242" class="Comment">-- &quot;Right&quot; context of factoring (see type of factorExt)</a>
<a id="9298" class="Comment">-- rCtx e w == proj₁ (proj₂ (proj₂ (factor2 (_ , e) w)))</a>
<a id="rCtx"></a><a id="9355" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9360" class="Symbol">:</a> <a id="9362" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="9366" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="9368" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="9370" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="9373" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="9376" class="Symbol">→</a> <a id="9378" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="9380" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="9382" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="9385" class="Symbol">→</a> <a id="9387" href="Context.Base.html#419" class="Datatype">Ctx</a>
<a id="9391" href="Context.Base.html#9355" class="Function">rCtx</a>  <a id="9397" class="Symbol">{</a><a id="9398" class="Argument">Γ</a> <a id="9400" class="Symbol">=</a> <a id="9402" href="Context.Base.html#9402" class="Bound">Γ</a><a id="9403" class="Symbol">}</a>     <a id="9409" class="Symbol">{</a><a id="9410" class="Argument">Γ&#39;</a> <a id="9413" class="Symbol">=</a> <a id="9415" href="Context.Base.html#9415" class="Bound">Γ&#39;</a><a id="9417" class="Symbol">}</a>       <a id="9425" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>        <a id="9436" href="Context.Base.html#9436" class="Bound">w</a>
  <a id="9440" class="Symbol">=</a> <a id="9442" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
<a id="9445" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9450" class="Symbol">{</a><a id="9451" class="Argument">Γ</a> <a id="9453" class="Symbol">=</a> <a id="9455" href="Context.Base.html#9455" class="Bound">Γ</a> <a id="9457" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9460" href="Context.Base.html#9460" class="Bound">a</a><a id="9461" class="Symbol">}</a> <a id="9463" class="Symbol">{</a><a id="9464" class="Argument">Γ&#39;</a> <a id="9467" class="Symbol">=</a> <a id="9469" href="Context.Base.html#9469" class="Bound">Γ&#39;</a> <a id="9472" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9475" href="Context.Base.html#9475" class="Bound">b</a><a id="9476" class="Symbol">}</a>  <a id="9479" class="Symbol">(</a><a id="9480" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9484" href="Context.Base.html#9484" class="Bound">e</a><a id="9485" class="Symbol">)</a>    <a id="9490" class="Symbol">(</a><a id="9491" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="9496" href="Context.Base.html#9496" class="Bound">w</a><a id="9497" class="Symbol">)</a>
  <a id="9501" class="Symbol">=</a> <a id="9503" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9508" class="Symbol">(</a><a id="9509" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9513" href="Context.Base.html#9484" class="Bound">e</a><a id="9514" class="Symbol">)</a> <a id="9516" href="Context.Base.html#9496" class="Bound">w</a> <a id="9518" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9521" href="Context.Base.html#9475" class="Bound">b</a>
<a id="9523" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9528" class="Symbol">{</a><a id="9529" class="Argument">Γ</a> <a id="9531" class="Symbol">=</a> <a id="9533" href="Context.Base.html#9533" class="Bound">Γ</a> <a id="9535" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9538" href="Context.Base.html#9538" class="Bound">a</a><a id="9539" class="Symbol">}</a> <a id="9541" class="Symbol">{</a><a id="9542" class="Argument">Γ&#39;</a> <a id="9545" class="Symbol">=</a> <a id="9547" href="Context.Base.html#9547" class="Bound">Γ&#39;</a> <a id="9550" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9553" class="DottedPattern Symbol">.</a><a id="9554" href="Context.Base.html#9538" class="DottedPattern Bound">a</a><a id="9555" class="Symbol">}</a> <a id="9557" class="Symbol">(</a><a id="9558" href="Context.Base.html#4057" class="InductiveConstructor">ext</a> <a id="9562" href="Context.Base.html#9562" class="Bound">e</a><a id="9563" class="Symbol">)</a>    <a id="9568" class="Symbol">(</a><a id="9569" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="9574" href="Context.Base.html#9574" class="Bound">w</a><a id="9575" class="Symbol">)</a>
  <a id="9579" class="Symbol">=</a> <a id="9581" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9586" href="Context.Base.html#9562" class="Bound">e</a> <a id="9588" href="Context.Base.html#9574" class="Bound">w</a> <a id="9590" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9593" href="Context.Base.html#9538" class="Bound">a</a>
<a id="9595" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9600" class="Symbol">{</a><a id="9601" class="Argument">Γ</a> <a id="9603" class="Symbol">=</a> <a id="9605" href="Context.Base.html#9605" class="Bound">Γ</a> <a id="9607" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="9608" class="Symbol">}</a>    <a id="9613" class="Symbol">{</a><a id="9614" class="Argument">Γ&#39;</a> <a id="9617" class="Symbol">=</a> <a id="9619" href="Context.Base.html#9619" class="Bound">Γ&#39;</a> <a id="9622" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9625" href="Context.Base.html#9625" class="Bound">a</a><a id="9626" class="Symbol">}</a>  <a id="9629" class="Symbol">(</a><a id="9630" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9635" href="Context.Base.html#9635" class="Bound">f</a> <a id="9637" href="Context.Base.html#9637" class="Bound">e</a><a id="9638" class="Symbol">)</a> <a id="9640" class="Symbol">(</a><a id="9641" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="9646" class="Symbol">{</a><a id="9647" class="Argument">a</a> <a id="9649" class="Symbol">=</a> <a id="9651" href="Context.Base.html#9625" class="Bound">a</a><a id="9652" class="Symbol">}</a> <a id="9654" href="Context.Base.html#9654" class="Bound">w</a><a id="9655" class="Symbol">)</a>
  <a id="9659" class="Symbol">=</a> <a id="9661" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9666" class="Symbol">(</a><a id="9667" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9672" href="Context.Base.html#9635" class="Bound">f</a> <a id="9674" href="Context.Base.html#9637" class="Bound">e</a><a id="9675" class="Symbol">)</a> <a id="9677" href="Context.Base.html#9654" class="Bound">w</a> <a id="9679" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="9682" href="Context.Base.html#9625" class="Bound">a</a>
<a id="9684" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9689" class="Symbol">{</a><a id="9690" class="Argument">Γ</a> <a id="9692" class="Symbol">=</a> <a id="9694" href="Context.Base.html#9694" class="Bound">Γ</a> <a id="9696" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="9697" class="Symbol">}</a>    <a id="9702" class="Symbol">{</a><a id="9703" class="Argument">Γ&#39;</a> <a id="9706" class="Symbol">=</a> <a id="9708" href="Context.Base.html#9708" class="Bound">Γ&#39;</a> <a id="9711" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="9712" class="Symbol">}</a>     <a id="9718" class="Symbol">(</a><a id="9719" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="9724" href="Context.Base.html#9724" class="Bound">f</a> <a id="9726" href="Context.Base.html#9726" class="Bound">e</a><a id="9727" class="Symbol">)</a> <a id="9729" class="Symbol">(</a><a id="9730" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="9736" href="Context.Base.html#9736" class="Bound">w</a><a id="9737" class="Symbol">)</a>
  <a id="9741" class="Symbol">=</a> <a id="9743" class="Symbol">(</a><a id="9744" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9749" href="Context.Base.html#9726" class="Bound">e</a> <a id="9751" href="Context.Base.html#9736" class="Bound">w</a><a id="9752" class="Symbol">)</a> <a id="9754" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a>

<a id="9757" class="Comment">-- factorExt e w == proj₂ (proj₂ (proj₂ (factor2 (_ , e) w)))</a>
<a id="factorExt"></a><a id="9819" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="9829" class="Symbol">:</a> <a id="9831" class="Symbol">(</a><a id="9832" href="Context.Base.html#9832" class="Bound">e</a> <a id="9834" class="Symbol">:</a> <a id="9836" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="9840" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="9842" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="9844" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="9847" href="Context.Base.html#627" class="Generalizable">ΓR</a><a id="9849" class="Symbol">)</a> <a id="9851" class="Symbol">→</a> <a id="9853" class="Symbol">(</a><a id="9854" href="Context.Base.html#9854" class="Bound">w</a> <a id="9856" class="Symbol">:</a> <a id="9858" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="9860" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="9862" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a><a id="9864" class="Symbol">)</a> <a id="9866" class="Symbol">→</a> <a id="9868" href="Context.Base.html#3988" class="Datatype">Ext</a> <a id="9872" href="Context.Base.html#3918" class="Generalizable">θ</a> <a id="9874" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="9877" class="Symbol">(</a><a id="9878" href="Context.Base.html#8521" class="Function">lCtx</a> <a id="9883" href="Context.Base.html#9832" class="Bound">e</a> <a id="9885" href="Context.Base.html#9854" class="Bound">w</a><a id="9886" class="Symbol">)</a> <a id="9888" class="Symbol">(</a><a id="9889" href="Context.Base.html#9355" class="Function">rCtx</a> <a id="9894" href="Context.Base.html#9832" class="Bound">e</a> <a id="9896" href="Context.Base.html#9854" class="Bound">w</a><a id="9897" class="Symbol">)</a>
<a id="9899" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="9909" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>        <a id="9920" href="Context.Base.html#9920" class="Bound">w</a>         <a id="9930" class="Symbol">=</a> <a id="9932" href="Context.Base.html#4035" class="InductiveConstructor">nil</a>
<a id="9936" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="9946" class="Symbol">(</a><a id="9947" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="9954" href="Context.Base.html#9954" class="Bound">e</a><a id="9955" class="Symbol">)</a> <a id="9957" class="Symbol">(</a><a id="9958" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="9963" href="Context.Base.html#9963" class="Bound">w</a><a id="9964" class="Symbol">)</a>  <a id="9967" class="Symbol">=</a> <a id="9969" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="9976" class="Symbol">(</a><a id="9977" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="9987" class="Symbol">(</a><a id="9988" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="9995" href="Context.Base.html#9954" class="Bound">e</a><a id="9996" class="Symbol">)</a> <a id="9998" href="Context.Base.html#9963" class="Bound">w</a><a id="9999" class="Symbol">)</a>
<a id="10001" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10011" class="Symbol">(</a><a id="10012" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="10019" href="Context.Base.html#10019" class="Bound">e</a><a id="10020" class="Symbol">)</a> <a id="10022" class="Symbol">(</a><a id="10023" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="10028" href="Context.Base.html#10028" class="Bound">w</a><a id="10029" class="Symbol">)</a>  <a id="10032" class="Symbol">=</a> <a id="10034" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="10041" class="Symbol">(</a><a id="10042" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10052" href="Context.Base.html#10019" class="Bound">e</a>          <a id="10063" href="Context.Base.html#10028" class="Bound">w</a><a id="10064" class="Symbol">)</a>
<a id="10066" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10076" class="Symbol">(</a><a id="10077" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="10082" href="Context.Base.html#10082" class="Bound">f</a> <a id="10084" href="Context.Base.html#10084" class="Bound">e</a><a id="10085" class="Symbol">)</a> <a id="10087" class="Symbol">(</a><a id="10088" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="10093" href="Context.Base.html#10093" class="Bound">w</a><a id="10094" class="Symbol">)</a>  <a id="10097" class="Symbol">=</a> <a id="10099" href="Context.Base.html#4057" class="InductiveConstructor">ext</a>    <a id="10106" class="Symbol">(</a><a id="10107" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10117" class="Symbol">(</a><a id="10118" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="10123" href="Context.Base.html#10082" class="Bound">f</a> <a id="10125" href="Context.Base.html#10084" class="Bound">e</a><a id="10126" class="Symbol">)</a> <a id="10128" href="Context.Base.html#10093" class="Bound">w</a><a id="10129" class="Symbol">)</a>
<a id="10131" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10141" class="Symbol">(</a><a id="10142" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="10147" href="Context.Base.html#10147" class="Bound">f</a> <a id="10149" href="Context.Base.html#10149" class="Bound">e</a><a id="10150" class="Symbol">)</a> <a id="10152" class="Symbol">(</a><a id="10153" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="10159" href="Context.Base.html#10159" class="Bound">w</a><a id="10160" class="Symbol">)</a> <a id="10162" class="Symbol">=</a> <a id="10164" href="Context.Base.html#4116" class="InductiveConstructor">ext#</a> <a id="10169" href="Context.Base.html#10147" class="Bound">f</a> <a id="10171" class="Symbol">(</a><a id="10172" href="Context.Base.html#9819" class="Function">factorExt</a> <a id="10182" href="Context.Base.html#10149" class="Bound">e</a>          <a id="10193" href="Context.Base.html#10159" class="Bound">w</a><a id="10194" class="Symbol">)</a>

<a id="10197" class="Comment">-------------------------------------------------------------------------------------</a>
<a id="10283" class="Comment">-- Substitutions (parameterized by terms `Tm` and modal accessibility relation `Acc`)</a>
<a id="10369" class="Comment">-------------------------------------------------------------------------------------</a>

<a id="10456" class="Keyword">module</a> <a id="Substitution"></a><a id="10463" href="Context.Base.html#10463" class="Module">Substitution</a>
  <a id="10478" class="Symbol">(</a><a id="10479" href="Context.Base.html#10479" class="Bound">Tm</a>          <a id="10491" class="Symbol">:</a> <a id="10493" class="Symbol">(</a><a id="10494" href="Context.Base.html#10494" class="Bound">Γ</a> <a id="10496" class="Symbol">:</a> <a id="10498" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10501" class="Symbol">)</a> <a id="10503" class="Symbol">→</a> <a id="10505" class="Symbol">(</a><a id="10506" href="Context.Base.html#10506" class="Bound">a</a> <a id="10508" class="Symbol">:</a> <a id="10510" href="Context.Base.html#57" class="Bound">Ty</a><a id="10512" class="Symbol">)</a> <a id="10514" class="Symbol">→</a> <a id="10516" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="10519" class="Symbol">)</a>
  <a id="10523" class="Symbol">(</a><a id="10524" href="Context.Base.html#10524" class="Bound">var</a>         <a id="10536" class="Symbol">:</a> <a id="10538" class="Symbol">{</a><a id="10539" href="Context.Base.html#10539" class="Bound">Γ</a> <a id="10541" class="Symbol">:</a> <a id="10543" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10546" class="Symbol">}</a> <a id="10548" class="Symbol">→</a> <a id="10550" class="Symbol">{</a><a id="10551" href="Context.Base.html#10551" class="Bound">a</a> <a id="10553" class="Symbol">:</a> <a id="10555" href="Context.Base.html#57" class="Bound">Ty</a><a id="10557" class="Symbol">}</a> <a id="10559" class="Symbol">→</a> <a id="10561" class="Symbol">(</a><a id="10562" href="Context.Base.html#10562" class="Bound">v</a> <a id="10564" class="Symbol">:</a> <a id="10566" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="10570" href="Context.Base.html#10539" class="Bound">Γ</a> <a id="10572" href="Context.Base.html#10551" class="Bound">a</a><a id="10573" class="Symbol">)</a> <a id="10575" class="Symbol">→</a> <a id="10577" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="10580" href="Context.Base.html#10539" class="Bound">Γ</a> <a id="10582" href="Context.Base.html#10551" class="Bound">a</a><a id="10583" class="Symbol">)</a>
  <a id="10587" class="Symbol">(</a><a id="10588" href="Context.Base.html#10588" class="Bound">wkTm</a>        <a id="10600" class="Symbol">:</a> <a id="10602" class="Symbol">{</a><a id="10603" href="Context.Base.html#10603" class="Bound">Γ&#39;</a> <a id="10606" href="Context.Base.html#10606" class="Bound">Γ</a> <a id="10608" class="Symbol">:</a> <a id="10610" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10613" class="Symbol">}</a> <a id="10615" class="Symbol">→</a> <a id="10617" class="Symbol">{</a><a id="10618" href="Context.Base.html#10618" class="Bound">a</a> <a id="10620" class="Symbol">:</a> <a id="10622" href="Context.Base.html#57" class="Bound">Ty</a><a id="10624" class="Symbol">}</a> <a id="10626" class="Symbol">→</a> <a id="10628" class="Symbol">(</a><a id="10629" href="Context.Base.html#10629" class="Bound">w</a> <a id="10631" class="Symbol">:</a> <a id="10633" href="Context.Base.html#10606" class="Bound">Γ</a> <a id="10635" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="10637" href="Context.Base.html#10603" class="Bound">Γ&#39;</a><a id="10639" class="Symbol">)</a> <a id="10641" class="Symbol">→</a> <a id="10643" class="Symbol">(</a><a id="10644" href="Context.Base.html#10644" class="Bound">t</a> <a id="10646" class="Symbol">:</a> <a id="10648" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="10651" href="Context.Base.html#10606" class="Bound">Γ</a> <a id="10653" href="Context.Base.html#10618" class="Bound">a</a><a id="10654" class="Symbol">)</a> <a id="10656" class="Symbol">→</a> <a id="10658" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="10661" href="Context.Base.html#10603" class="Bound">Γ&#39;</a> <a id="10664" href="Context.Base.html#10618" class="Bound">a</a><a id="10665" class="Symbol">)</a>
  <a id="10669" class="Symbol">(</a><a id="10670" href="Context.Base.html#10670" class="Bound">Acc</a>         <a id="10682" class="Symbol">:</a> <a id="10684" class="Symbol">(</a><a id="10685" href="Context.Base.html#10685" class="Bound">Δ</a> <a id="10687" href="Context.Base.html#10687" class="Bound">Γ</a> <a id="10689" href="Context.Base.html#10689" class="Bound">ΓR</a> <a id="10692" class="Symbol">:</a> <a id="10694" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10697" class="Symbol">)</a> <a id="10699" class="Symbol">→</a> <a id="10701" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="10704" class="Symbol">)</a>
  <a id="10708" class="Symbol">{</a><a id="10709" href="Context.Base.html#10709" class="Bound">newR</a>        <a id="10721" class="Symbol">:</a> <a id="10723" class="Symbol">(</a><a id="10724" href="Context.Base.html#10724" class="Bound">Γ</a> <a id="10726" class="Symbol">:</a> <a id="10728" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10731" class="Symbol">)</a> <a id="10733" class="Symbol">→</a> <a id="10735" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10738" class="Symbol">}</a>
  <a id="10742" class="Symbol">(</a><a id="10743" href="Context.Base.html#10743" class="Bound">new</a>         <a id="10755" class="Symbol">:</a> <a id="10757" class="Symbol">∀</a> <a id="10759" class="Symbol">{</a><a id="10760" href="Context.Base.html#10760" class="Bound">Γ</a> <a id="10762" class="Symbol">:</a> <a id="10764" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10767" class="Symbol">}</a> <a id="10769" class="Symbol">→</a> <a id="10771" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="10775" class="Symbol">(</a><a id="10776" href="Context.Base.html#10760" class="Bound">Γ</a> <a id="10778" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="10779" class="Symbol">)</a> <a id="10781" href="Context.Base.html#10760" class="Bound">Γ</a> <a id="10783" class="Symbol">(</a><a id="10784" href="Context.Base.html#10709" class="Bound">newR</a> <a id="10789" href="Context.Base.html#10760" class="Bound">Γ</a><a id="10790" class="Symbol">))</a>
  <a id="10795" class="Symbol">(</a><a id="10796" href="Context.Base.html#10796" class="Bound">lCtx</a>        <a id="10808" class="Symbol">:</a> <a id="10810" class="Symbol">{</a><a id="10811" href="Context.Base.html#10811" class="Bound">Δ</a> <a id="10813" href="Context.Base.html#10813" class="Bound">Γ</a> <a id="10815" href="Context.Base.html#10815" class="Bound">ΓR</a> <a id="10818" href="Context.Base.html#10818" class="Bound">Δ&#39;</a> <a id="10821" class="Symbol">:</a> <a id="10823" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10826" class="Symbol">}</a> <a id="10828" class="Symbol">→</a> <a id="10830" class="Symbol">(</a><a id="10831" href="Context.Base.html#10831" class="Bound">e</a> <a id="10833" class="Symbol">:</a> <a id="10835" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="10839" href="Context.Base.html#10811" class="Bound">Δ</a> <a id="10841" href="Context.Base.html#10813" class="Bound">Γ</a> <a id="10843" href="Context.Base.html#10815" class="Bound">ΓR</a><a id="10845" class="Symbol">)</a> <a id="10847" class="Symbol">→</a> <a id="10849" class="Symbol">(</a><a id="10850" href="Context.Base.html#10850" class="Bound">w</a> <a id="10852" class="Symbol">:</a> <a id="10854" href="Context.Base.html#10811" class="Bound">Δ</a> <a id="10856" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="10858" href="Context.Base.html#10818" class="Bound">Δ&#39;</a><a id="10860" class="Symbol">)</a> <a id="10862" class="Symbol">→</a> <a id="10864" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10867" class="Symbol">)</a>
  <a id="10871" class="Symbol">(</a><a id="10872" href="Context.Base.html#10872" class="Bound">factorWk</a>    <a id="10884" class="Symbol">:</a> <a id="10886" class="Symbol">∀</a> <a id="10888" class="Symbol">{</a><a id="10889" href="Context.Base.html#10889" class="Bound">Δ</a> <a id="10891" href="Context.Base.html#10891" class="Bound">Γ</a> <a id="10893" href="Context.Base.html#10893" class="Bound">ΓR</a> <a id="10896" href="Context.Base.html#10896" class="Bound">Δ&#39;</a> <a id="10899" class="Symbol">:</a> <a id="10901" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10904" class="Symbol">}</a> <a id="10906" class="Symbol">(</a><a id="10907" href="Context.Base.html#10907" class="Bound">e</a> <a id="10909" class="Symbol">:</a> <a id="10911" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="10915" href="Context.Base.html#10889" class="Bound">Δ</a> <a id="10917" href="Context.Base.html#10891" class="Bound">Γ</a> <a id="10919" href="Context.Base.html#10893" class="Bound">ΓR</a><a id="10921" class="Symbol">)</a> <a id="10923" class="Symbol">(</a><a id="10924" href="Context.Base.html#10924" class="Bound">w</a> <a id="10926" class="Symbol">:</a> <a id="10928" href="Context.Base.html#10889" class="Bound">Δ</a> <a id="10930" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="10932" href="Context.Base.html#10896" class="Bound">Δ&#39;</a><a id="10934" class="Symbol">)</a> <a id="10936" class="Symbol">→</a> <a id="10938" href="Context.Base.html#10891" class="Bound">Γ</a> <a id="10940" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="10942" href="Context.Base.html#10796" class="Bound">lCtx</a> <a id="10947" href="Context.Base.html#10907" class="Bound">e</a> <a id="10949" href="Context.Base.html#10924" class="Bound">w</a><a id="10950" class="Symbol">)</a>
  <a id="10954" class="Symbol">(</a><a id="10955" href="Context.Base.html#10955" class="Bound">rCtx</a>        <a id="10967" class="Symbol">:</a> <a id="10969" class="Symbol">{</a><a id="10970" href="Context.Base.html#10970" class="Bound">Δ</a> <a id="10972" href="Context.Base.html#10972" class="Bound">Γ</a> <a id="10974" href="Context.Base.html#10974" class="Bound">ΓR</a> <a id="10977" href="Context.Base.html#10977" class="Bound">Δ&#39;</a> <a id="10980" class="Symbol">:</a> <a id="10982" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="10985" class="Symbol">}</a> <a id="10987" class="Symbol">→</a> <a id="10989" class="Symbol">(</a><a id="10990" href="Context.Base.html#10990" class="Bound">e</a> <a id="10992" class="Symbol">:</a> <a id="10994" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="10998" href="Context.Base.html#10970" class="Bound">Δ</a> <a id="11000" href="Context.Base.html#10972" class="Bound">Γ</a> <a id="11002" href="Context.Base.html#10974" class="Bound">ΓR</a><a id="11004" class="Symbol">)</a> <a id="11006" class="Symbol">→</a> <a id="11008" class="Symbol">(</a><a id="11009" href="Context.Base.html#11009" class="Bound">w</a> <a id="11011" class="Symbol">:</a> <a id="11013" href="Context.Base.html#10970" class="Bound">Δ</a> <a id="11015" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="11017" href="Context.Base.html#10977" class="Bound">Δ&#39;</a><a id="11019" class="Symbol">)</a> <a id="11021" class="Symbol">→</a> <a id="11023" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="11026" class="Symbol">)</a>
  <a id="11030" class="Symbol">(</a><a id="11031" href="Context.Base.html#11031" class="Bound">factorExt</a>   <a id="11043" class="Symbol">:</a> <a id="11045" class="Symbol">∀</a> <a id="11047" class="Symbol">{</a><a id="11048" href="Context.Base.html#11048" class="Bound">Δ</a> <a id="11050" href="Context.Base.html#11050" class="Bound">Γ</a> <a id="11052" href="Context.Base.html#11052" class="Bound">ΓR</a> <a id="11055" href="Context.Base.html#11055" class="Bound">Δ&#39;</a> <a id="11058" class="Symbol">:</a> <a id="11060" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="11063" class="Symbol">}</a> <a id="11065" class="Symbol">(</a><a id="11066" href="Context.Base.html#11066" class="Bound">e</a> <a id="11068" class="Symbol">:</a> <a id="11070" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="11074" href="Context.Base.html#11048" class="Bound">Δ</a> <a id="11076" href="Context.Base.html#11050" class="Bound">Γ</a> <a id="11078" href="Context.Base.html#11052" class="Bound">ΓR</a><a id="11080" class="Symbol">)</a> <a id="11082" class="Symbol">(</a><a id="11083" href="Context.Base.html#11083" class="Bound">w</a> <a id="11085" class="Symbol">:</a> <a id="11087" href="Context.Base.html#11048" class="Bound">Δ</a> <a id="11089" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="11091" href="Context.Base.html#11055" class="Bound">Δ&#39;</a><a id="11093" class="Symbol">)</a> <a id="11095" class="Symbol">→</a> <a id="11097" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="11101" href="Context.Base.html#11055" class="Bound">Δ&#39;</a> <a id="11104" class="Symbol">(</a><a id="11105" href="Context.Base.html#10796" class="Bound">lCtx</a> <a id="11110" href="Context.Base.html#11066" class="Bound">e</a> <a id="11112" href="Context.Base.html#11083" class="Bound">w</a><a id="11113" class="Symbol">)</a> <a id="11115" class="Symbol">(</a><a id="11116" href="Context.Base.html#10955" class="Bound">rCtx</a> <a id="11121" href="Context.Base.html#11066" class="Bound">e</a> <a id="11123" href="Context.Base.html#11083" class="Bound">w</a><a id="11124" class="Symbol">))</a>
  <a id="11129" class="Keyword">where</a>

  <a id="11138" class="Keyword">data</a> <a id="Substitution.Sub"></a><a id="11143" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11147" class="Symbol">:</a> <a id="11149" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="11153" class="Symbol">→</a> <a id="11155" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="11159" class="Symbol">→</a> <a id="11161" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="11165" class="Keyword">where</a>
    <a id="Substitution.Sub.[]"></a><a id="11175" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>   <a id="11180" class="Symbol">:</a> <a id="11182" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11186" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11188" href="Context.Base.html#437" class="InductiveConstructor">[]</a>
    <a id="Substitution.Sub._`,_"></a><a id="11195" href="Context.Base.html#11195" class="InductiveConstructor Operator">_`,_</a> <a id="11200" class="Symbol">:</a> <a id="11202" class="Symbol">(</a><a id="11203" href="Context.Base.html#11203" class="Bound">σ</a> <a id="11205" class="Symbol">:</a> <a id="11207" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11211" href="Context.Base.html#655" class="Generalizable">Δ</a>  <a id="11214" href="Context.Base.html#598" class="Generalizable">Γ</a><a id="11215" class="Symbol">)</a> <a id="11217" class="Symbol">→</a> <a id="11219" class="Symbol">(</a><a id="11220" href="Context.Base.html#11220" class="Bound">t</a> <a id="11222" class="Symbol">:</a> <a id="11224" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="11227" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11229" href="Context.Base.html#318" class="Generalizable">a</a><a id="11230" class="Symbol">)</a>      <a id="11237" class="Symbol">→</a> <a id="11239" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11243" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11245" class="Symbol">(</a><a id="11246" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11248" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="11251" href="Context.Base.html#318" class="Generalizable">a</a><a id="11252" class="Symbol">)</a>
    <a id="Substitution.Sub.lock"></a><a id="11258" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="11263" class="Symbol">:</a> <a id="11265" class="Symbol">(</a><a id="11266" href="Context.Base.html#11266" class="Bound">σ</a> <a id="11268" class="Symbol">:</a> <a id="11270" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11274" href="Context.Base.html#664" class="Generalizable">ΔL</a> <a id="11277" href="Context.Base.html#598" class="Generalizable">Γ</a><a id="11278" class="Symbol">)</a> <a id="11280" class="Symbol">→</a> <a id="11282" class="Symbol">(</a><a id="11283" href="Context.Base.html#11283" class="Bound">e</a> <a id="11285" class="Symbol">:</a> <a id="11287" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="11291" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11293" href="Context.Base.html#664" class="Generalizable">ΔL</a> <a id="11296" href="Context.Base.html#684" class="Generalizable">ΔR</a><a id="11298" class="Symbol">)</a> <a id="11300" class="Symbol">→</a> <a id="11302" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11306" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11308" class="Symbol">(</a><a id="11309" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11311" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="11312" class="Symbol">)</a>

  <a id="Substitution.Sub-"></a><a id="11317" href="Context.Base.html#11317" class="Function">Sub-</a> <a id="11322" class="Symbol">:</a> <a id="11324" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="11328" class="Symbol">→</a> <a id="11330" href="Context.Base.html#419" class="Datatype">Ctx</a> <a id="11334" class="Symbol">→</a> <a id="11336" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="11342" href="Context.Base.html#11317" class="Function">Sub-</a> <a id="11347" href="Context.Base.html#11347" class="Bound">Δ</a> <a id="11349" href="Context.Base.html#11349" class="Bound">Γ</a> <a id="11351" class="Symbol">=</a> <a id="11353" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11357" href="Context.Base.html#11349" class="Bound">Γ</a> <a id="11359" href="Context.Base.html#11347" class="Bound">Δ</a>

  <a id="11364" class="Keyword">variable</a>
    <a id="11377" href="Context.Base.html#11377" class="Generalizable">s</a> <a id="11379" href="Context.Base.html#11379" class="Generalizable">s&#39;</a> <a id="11382" href="Context.Base.html#11382" class="Generalizable">s&#39;&#39;</a> <a id="11386" class="Symbol">:</a> <a id="11388" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11392" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11394" href="Context.Base.html#598" class="Generalizable">Γ</a>
    <a id="11400" href="Context.Base.html#11400" class="Generalizable">σ</a> <a id="11402" href="Context.Base.html#11402" class="Generalizable">σ&#39;</a> <a id="11405" href="Context.Base.html#11405" class="Generalizable">σ&#39;&#39;</a> <a id="11409" class="Symbol">:</a> <a id="11411" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11415" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11417" href="Context.Base.html#598" class="Generalizable">Γ</a>
    <a id="11423" href="Context.Base.html#11423" class="Generalizable">τ</a> <a id="11425" href="Context.Base.html#11425" class="Generalizable">τ&#39;</a> <a id="11428" href="Context.Base.html#11428" class="Generalizable">τ&#39;&#39;</a> <a id="11432" class="Symbol">:</a> <a id="11434" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11438" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11440" href="Context.Base.html#598" class="Generalizable">Γ</a>

  <a id="11445" class="Comment">-- composition operation for weakening after substitution</a>
  <a id="Substitution.trimSub"></a><a id="11505" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11513" class="Symbol">:</a> <a id="11515" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11517" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="11519" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11521" class="Symbol">→</a> <a id="11523" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11527" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="11530" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11532" class="Symbol">→</a> <a id="11534" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11538" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="11541" href="Context.Base.html#655" class="Generalizable">Δ</a>
  <a id="11545" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11553" href="Context.Base.html#1387" class="InductiveConstructor">base</a>      <a id="11563" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>         <a id="11574" class="Symbol">=</a> <a id="11576" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>
  <a id="11581" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11589" class="Symbol">(</a><a id="11590" href="Context.Base.html#1406" class="InductiveConstructor">drop</a> <a id="11595" href="Context.Base.html#11595" class="Bound">w</a><a id="11596" class="Symbol">)</a>  <a id="11599" class="Symbol">(</a><a id="11600" href="Context.Base.html#11600" class="Bound">s</a> <a id="11602" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11605" href="Context.Base.html#11605" class="Bound">x</a><a id="11606" class="Symbol">)</a>   <a id="11610" class="Symbol">=</a> <a id="11612" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11620" href="Context.Base.html#11595" class="Bound">w</a> <a id="11622" href="Context.Base.html#11600" class="Bound">s</a>
  <a id="11626" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11634" class="Symbol">(</a><a id="11635" href="Context.Base.html#1442" class="InductiveConstructor">keep</a> <a id="11640" href="Context.Base.html#11640" class="Bound">w</a><a id="11641" class="Symbol">)</a>  <a id="11644" class="Symbol">(</a><a id="11645" href="Context.Base.html#11645" class="Bound">s</a> <a id="11647" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11650" href="Context.Base.html#11650" class="Bound">x</a><a id="11651" class="Symbol">)</a>   <a id="11655" class="Symbol">=</a> <a id="11657" class="Symbol">(</a><a id="11658" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11666" href="Context.Base.html#11640" class="Bound">w</a> <a id="11668" href="Context.Base.html#11645" class="Bound">s</a><a id="11669" class="Symbol">)</a> <a id="11671" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11674" href="Context.Base.html#11650" class="Bound">x</a>
  <a id="11678" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11686" class="Symbol">(</a><a id="11687" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="11693" href="Context.Base.html#11693" class="Bound">w</a><a id="11694" class="Symbol">)</a> <a id="11696" class="Symbol">(</a><a id="11697" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="11702" href="Context.Base.html#11702" class="Bound">s</a> <a id="11704" href="Context.Base.html#11704" class="Bound">x</a><a id="11705" class="Symbol">)</a> <a id="11707" class="Symbol">=</a> <a id="11709" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="11714" class="Symbol">(</a><a id="11715" href="Context.Base.html#11505" class="Function">trimSub</a> <a id="11723" href="Context.Base.html#11693" class="Bound">w</a> <a id="11725" href="Context.Base.html#11702" class="Bound">s</a><a id="11726" class="Symbol">)</a> <a id="11728" href="Context.Base.html#11704" class="Bound">x</a>

  <a id="11733" class="Comment">-- apply substitution to a variable</a>
  <a id="Substitution.substVar"></a><a id="11771" href="Context.Base.html#11771" class="Function">substVar</a> <a id="11780" class="Symbol">:</a> <a id="11782" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11786" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11788" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11790" class="Symbol">→</a> <a id="11792" href="Context.Base.html#2565" class="Datatype">Var</a> <a id="11796" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11798" href="Context.Base.html#318" class="Generalizable">a</a> <a id="11800" class="Symbol">→</a> <a id="11802" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="11805" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11807" href="Context.Base.html#318" class="Generalizable">a</a>
  <a id="11811" href="Context.Base.html#11771" class="Function">substVar</a> <a id="11820" class="Symbol">(</a><a id="11821" href="Context.Base.html#11821" class="Bound">s</a> <a id="11823" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11826" href="Context.Base.html#11826" class="Bound">t</a><a id="11827" class="Symbol">)</a>  <a id="11830" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>     <a id="11839" class="Symbol">=</a> <a id="11841" href="Context.Base.html#11826" class="Bound">t</a>
  <a id="11845" href="Context.Base.html#11771" class="Function">substVar</a> <a id="11854" class="Symbol">(</a><a id="11855" href="Context.Base.html#11855" class="Bound">s</a> <a id="11857" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11860" href="Context.Base.html#11860" class="Bound Operator">_t</a><a id="11862" class="Symbol">)</a> <a id="11864" class="Symbol">(</a><a id="11865" href="Context.Base.html#2618" class="InductiveConstructor">succ</a> <a id="11870" href="Context.Base.html#11870" class="Bound">v</a><a id="11871" class="Symbol">)</a> <a id="11873" class="Symbol">=</a> <a id="11875" href="Context.Base.html#11771" class="Function">substVar</a> <a id="11884" href="Context.Base.html#11855" class="Bound">s</a> <a id="11886" href="Context.Base.html#11870" class="Bound">v</a>

  <a id="11891" class="Comment">-- weaken a substitution</a>
  <a id="Substitution.wkSub"></a><a id="11918" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="11924" class="Symbol">:</a> <a id="11926" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11928" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="11930" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="11933" class="Symbol">→</a> <a id="11935" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11939" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="11941" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="11943" class="Symbol">→</a> <a id="11945" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="11949" href="Context.Base.html#600" class="Generalizable">Γ&#39;</a> <a id="11952" href="Context.Base.html#655" class="Generalizable">Δ</a>
  <a id="11956" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="11962" href="Context.Base.html#11962" class="Bound">w</a> <a id="11964" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>         <a id="11975" class="Symbol">=</a> <a id="11977" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>
  <a id="11982" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="11988" href="Context.Base.html#11988" class="Bound">w</a> <a id="11990" class="Symbol">(</a><a id="11991" href="Context.Base.html#11991" class="Bound">s</a> <a id="11993" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="11996" href="Context.Base.html#11996" class="Bound">t</a><a id="11997" class="Symbol">)</a>   <a id="12001" class="Symbol">=</a> <a id="12003" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="12009" href="Context.Base.html#11988" class="Bound">w</a> <a id="12011" href="Context.Base.html#11991" class="Bound">s</a> <a id="12013" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="12016" href="Context.Base.html#10588" class="Bound">wkTm</a> <a id="12021" href="Context.Base.html#11988" class="Bound">w</a> <a id="12023" href="Context.Base.html#11996" class="Bound">t</a>
  <a id="12027" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="12033" href="Context.Base.html#12033" class="Bound">w</a> <a id="12035" class="Symbol">(</a><a id="12036" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="12041" href="Context.Base.html#12041" class="Bound">s</a> <a id="12043" href="Context.Base.html#12043" class="Bound">e</a><a id="12044" class="Symbol">)</a> <a id="12046" class="Symbol">=</a> <a id="12048" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="12053" class="Symbol">(</a><a id="12054" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="12060" class="Symbol">(</a><a id="12061" href="Context.Base.html#10872" class="Bound">factorWk</a> <a id="12070" href="Context.Base.html#12043" class="Bound">e</a> <a id="12072" href="Context.Base.html#12033" class="Bound">w</a><a id="12073" class="Symbol">)</a> <a id="12075" href="Context.Base.html#12041" class="Bound">s</a><a id="12076" class="Symbol">)</a> <a id="12078" class="Symbol">(</a><a id="12079" href="Context.Base.html#11031" class="Bound">factorExt</a> <a id="12089" href="Context.Base.html#12043" class="Bound">e</a> <a id="12091" href="Context.Base.html#12033" class="Bound">w</a><a id="12092" class="Symbol">)</a>

  <a id="12097" class="Comment">-- NOTE: composition requires parallel substitution for terms</a>

  <a id="12162" class="Comment">-- &quot;drop&quot; the last variable in the context</a>
  <a id="Substitution.dropₛ"></a><a id="12207" href="Context.Base.html#12207" class="Function">dropₛ</a> <a id="12213" class="Symbol">:</a> <a id="12215" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12219" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12221" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12223" class="Symbol">→</a> <a id="12225" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12229" class="Symbol">(</a><a id="12230" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12232" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="12235" href="Context.Base.html#318" class="Generalizable">a</a><a id="12236" class="Symbol">)</a> <a id="12238" href="Context.Base.html#655" class="Generalizable">Δ</a>
  <a id="12242" href="Context.Base.html#12207" class="Function">dropₛ</a> <a id="12248" href="Context.Base.html#12248" class="Bound">s</a> <a id="12250" class="Symbol">=</a> <a id="12252" href="Context.Base.html#11918" class="Function">wkSub</a> <a id="12258" href="Context.Base.html#2446" class="Function">fresh</a> <a id="12264" href="Context.Base.html#12248" class="Bound">s</a>

  <a id="12269" class="Comment">-- &quot;keep&quot; the last variable in the context</a>
  <a id="Substitution.keepₛ"></a><a id="12314" href="Context.Base.html#12314" class="Function">keepₛ</a> <a id="12320" class="Symbol">:</a> <a id="12322" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12326" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12328" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12330" class="Symbol">→</a> <a id="12332" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12336" class="Symbol">(</a><a id="12337" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12339" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="12342" href="Context.Base.html#318" class="Generalizable">a</a><a id="12343" class="Symbol">)</a> <a id="12345" class="Symbol">(</a><a id="12346" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12348" href="Context.Base.html#450" class="InductiveConstructor Operator">`,</a> <a id="12351" href="Context.Base.html#318" class="Generalizable">a</a><a id="12352" class="Symbol">)</a>
  <a id="12356" href="Context.Base.html#12314" class="Function">keepₛ</a> <a id="12362" href="Context.Base.html#12362" class="Bound">s</a> <a id="12364" class="Symbol">=</a> <a id="12366" href="Context.Base.html#12207" class="Function">dropₛ</a> <a id="12372" href="Context.Base.html#12362" class="Bound">s</a> <a id="12374" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="12377" href="Context.Base.html#10524" class="Bound">var</a> <a id="12381" href="Context.Base.html#2594" class="InductiveConstructor">zero</a>

  <a id="12389" class="Comment">-- &quot;keep&quot; the lock in the context</a>
  <a id="Substitution.keep#ₛ"></a><a id="12425" href="Context.Base.html#12425" class="Function">keep#ₛ</a> <a id="12432" class="Symbol">:</a> <a id="12434" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12438" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12440" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12442" class="Symbol">→</a> <a id="12444" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12448" class="Symbol">(</a><a id="12449" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12451" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="12452" class="Symbol">)</a> <a id="12454" class="Symbol">(</a><a id="12455" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12457" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="12458" class="Symbol">)</a>
  <a id="12462" href="Context.Base.html#12425" class="Function">keep#ₛ</a> <a id="12469" href="Context.Base.html#12469" class="Bound">s</a> <a id="12471" class="Symbol">=</a> <a id="12473" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="12478" href="Context.Base.html#12469" class="Bound">s</a> <a id="12480" href="Context.Base.html#10743" class="Bound">new</a>

  <a id="12487" class="Comment">-- embed a weakening to substitution</a>
  <a id="Substitution.embWk"></a><a id="12526" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12532" class="Symbol">:</a> <a id="12534" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="12536" href="Context.Base.html#1356" class="Datatype Operator">⊆</a> <a id="12538" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12540" class="Symbol">→</a> <a id="12542" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12546" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12548" href="Context.Base.html#655" class="Generalizable">Δ</a>
  <a id="12552" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12558" href="Context.Base.html#1387" class="InductiveConstructor">base</a>      <a id="12568" class="Symbol">=</a> <a id="12570" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>
  <a id="12575" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12581" class="Symbol">(</a><a id="12582" href="Context.Base.html#1406" class="InductiveConstructor">drop</a>  <a id="12588" href="Context.Base.html#12588" class="Bound">w</a><a id="12589" class="Symbol">)</a> <a id="12591" class="Symbol">=</a> <a id="12593" href="Context.Base.html#12207" class="Function">dropₛ</a>  <a id="12600" class="Symbol">(</a><a id="12601" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12607" href="Context.Base.html#12588" class="Bound">w</a><a id="12608" class="Symbol">)</a>
  <a id="12612" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12618" class="Symbol">(</a><a id="12619" href="Context.Base.html#1442" class="InductiveConstructor">keep</a>  <a id="12625" href="Context.Base.html#12625" class="Bound">w</a><a id="12626" class="Symbol">)</a> <a id="12628" class="Symbol">=</a> <a id="12630" href="Context.Base.html#12314" class="Function">keepₛ</a>  <a id="12637" class="Symbol">(</a><a id="12638" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12644" href="Context.Base.html#12625" class="Bound">w</a><a id="12645" class="Symbol">)</a>
  <a id="12649" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12655" class="Symbol">(</a><a id="12656" href="Context.Base.html#1483" class="InductiveConstructor">keep#</a> <a id="12662" href="Context.Base.html#12662" class="Bound">w</a><a id="12663" class="Symbol">)</a> <a id="12665" class="Symbol">=</a> <a id="12667" href="Context.Base.html#12425" class="Function">keep#ₛ</a> <a id="12674" class="Symbol">(</a><a id="12675" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12681" href="Context.Base.html#12662" class="Bound">w</a><a id="12682" class="Symbol">)</a>

  <a id="12687" class="Comment">-- identity substitution</a>
  <a id="Substitution.idₛ"></a><a id="12714" href="Context.Base.html#12714" class="Function">idₛ</a> <a id="12718" class="Symbol">:</a> <a id="12720" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12724" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12726" href="Context.Base.html#598" class="Generalizable">Γ</a>
  <a id="12730" href="Context.Base.html#12714" class="Function">idₛ</a> <a id="12734" class="Symbol">=</a> <a id="12736" href="Context.Base.html#12526" class="Function">embWk</a> <a id="12742" href="Context.Base.html#2129" class="Function">idWk</a>

  <a id="Substitution.idₛ[_]"></a><a id="12750" href="Context.Base.html#12750" class="Function Operator">idₛ[_]</a> <a id="12757" class="Symbol">=</a> <a id="12759" class="Symbol">λ</a> <a id="12761" href="Context.Base.html#12761" class="Bound">Γ</a> <a id="12763" class="Symbol">→</a> <a id="12765" href="Context.Base.html#12714" class="Function">idₛ</a> <a id="12769" class="Symbol">{</a><a id="12770" href="Context.Base.html#12761" class="Bound">Γ</a><a id="12771" class="Symbol">}</a>

  <a id="Substitution.ExtToSub"></a><a id="12776" href="Context.Base.html#12776" class="Function">ExtToSub</a> <a id="12785" class="Symbol">:</a> <a id="12787" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="12791" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12793" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="12796" href="Context.Base.html#627" class="Generalizable">ΓR</a> <a id="12799" class="Symbol">→</a> <a id="12801" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12805" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="12807" class="Symbol">(</a><a id="12808" href="Context.Base.html#607" class="Generalizable">ΓL</a> <a id="12811" href="Context.Base.html#486" class="InductiveConstructor Operator">#</a><a id="12812" class="Symbol">)</a>
  <a id="12816" href="Context.Base.html#12776" class="Function">ExtToSub</a> <a id="12825" href="Context.Base.html#12825" class="Bound">e</a> <a id="12827" class="Symbol">=</a> <a id="12829" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="12834" href="Context.Base.html#12714" class="Function">idₛ</a> <a id="12838" href="Context.Base.html#12825" class="Bound">e</a>

  <a id="12843" class="Keyword">module</a> <a id="Substitution.Composition"></a><a id="12850" href="Context.Base.html#12850" class="Module">Composition</a>
    <a id="12866" class="Symbol">(</a><a id="12867" href="Context.Base.html#12867" class="Bound">substTm</a>     <a id="12879" class="Symbol">:</a> <a id="12881" class="Symbol">{</a><a id="12882" href="Context.Base.html#12882" class="Bound">Δ</a> <a id="12884" href="Context.Base.html#12884" class="Bound">Γ</a> <a id="12886" class="Symbol">:</a> <a id="12888" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="12891" class="Symbol">}</a> <a id="12893" class="Symbol">→</a> <a id="12895" class="Symbol">{</a><a id="12896" href="Context.Base.html#12896" class="Bound">a</a> <a id="12898" class="Symbol">:</a> <a id="12900" href="Context.Base.html#57" class="Bound">Ty</a><a id="12902" class="Symbol">}</a> <a id="12904" class="Symbol">→</a> <a id="12906" class="Symbol">(</a><a id="12907" href="Context.Base.html#12907" class="Bound">σ</a> <a id="12909" class="Symbol">:</a> <a id="12911" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="12915" href="Context.Base.html#12882" class="Bound">Δ</a> <a id="12917" href="Context.Base.html#12884" class="Bound">Γ</a><a id="12918" class="Symbol">)</a> <a id="12920" class="Symbol">→</a> <a id="12922" class="Symbol">(</a><a id="12923" href="Context.Base.html#12923" class="Bound">t</a> <a id="12925" class="Symbol">:</a> <a id="12927" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="12930" href="Context.Base.html#12884" class="Bound">Γ</a> <a id="12932" href="Context.Base.html#12896" class="Bound">a</a><a id="12933" class="Symbol">)</a> <a id="12935" class="Symbol">→</a> <a id="12937" href="Context.Base.html#10479" class="Bound">Tm</a> <a id="12940" href="Context.Base.html#12882" class="Bound">Δ</a> <a id="12942" href="Context.Base.html#12896" class="Bound">a</a><a id="12943" class="Symbol">)</a>
    <a id="12949" class="Symbol">(</a><a id="12950" href="Context.Base.html#12950" class="Bound">lCtxₛ</a>       <a id="12962" class="Symbol">:</a> <a id="12964" class="Symbol">{</a><a id="12965" href="Context.Base.html#12965" class="Bound">Δ</a> <a id="12967" href="Context.Base.html#12967" class="Bound">Γ</a> <a id="12969" href="Context.Base.html#12969" class="Bound">ΓR</a> <a id="12972" href="Context.Base.html#12972" class="Bound">Θ</a> <a id="12974" class="Symbol">:</a> <a id="12976" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="12979" class="Symbol">}</a> <a id="12981" class="Symbol">→</a> <a id="12983" class="Symbol">(</a><a id="12984" href="Context.Base.html#12984" class="Bound">e</a> <a id="12986" class="Symbol">:</a> <a id="12988" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="12992" href="Context.Base.html#12965" class="Bound">Δ</a> <a id="12994" href="Context.Base.html#12967" class="Bound">Γ</a> <a id="12996" href="Context.Base.html#12969" class="Bound">ΓR</a><a id="12998" class="Symbol">)</a> <a id="13000" class="Symbol">→</a> <a id="13002" class="Symbol">(</a><a id="13003" href="Context.Base.html#13003" class="Bound">σ</a> <a id="13005" class="Symbol">:</a> <a id="13007" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13011" href="Context.Base.html#12972" class="Bound">Θ</a> <a id="13013" href="Context.Base.html#12965" class="Bound">Δ</a><a id="13014" class="Symbol">)</a> <a id="13016" class="Symbol">→</a> <a id="13018" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="13021" class="Symbol">)</a>
    <a id="13027" class="Symbol">(</a><a id="13028" href="Context.Base.html#13028" class="Bound">factorSubₛ</a>  <a id="13040" class="Symbol">:</a> <a id="13042" class="Symbol">∀</a> <a id="13044" class="Symbol">{</a><a id="13045" href="Context.Base.html#13045" class="Bound">Δ</a> <a id="13047" href="Context.Base.html#13047" class="Bound">Γ</a> <a id="13049" href="Context.Base.html#13049" class="Bound">ΓR</a> <a id="13052" href="Context.Base.html#13052" class="Bound">Θ</a> <a id="13054" class="Symbol">:</a> <a id="13056" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="13059" class="Symbol">}</a> <a id="13061" class="Symbol">(</a><a id="13062" href="Context.Base.html#13062" class="Bound">e</a> <a id="13064" class="Symbol">:</a> <a id="13066" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="13070" href="Context.Base.html#13045" class="Bound">Δ</a> <a id="13072" href="Context.Base.html#13047" class="Bound">Γ</a> <a id="13074" href="Context.Base.html#13049" class="Bound">ΓR</a><a id="13076" class="Symbol">)</a> <a id="13078" class="Symbol">(</a><a id="13079" href="Context.Base.html#13079" class="Bound">σ</a> <a id="13081" class="Symbol">:</a> <a id="13083" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13087" href="Context.Base.html#13052" class="Bound">Θ</a> <a id="13089" href="Context.Base.html#13045" class="Bound">Δ</a><a id="13090" class="Symbol">)</a> <a id="13092" class="Symbol">→</a> <a id="13094" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13098" class="Symbol">(</a><a id="13099" href="Context.Base.html#12950" class="Bound">lCtxₛ</a> <a id="13105" href="Context.Base.html#13062" class="Bound">e</a> <a id="13107" href="Context.Base.html#13079" class="Bound">σ</a><a id="13108" class="Symbol">)</a> <a id="13110" href="Context.Base.html#13047" class="Bound">Γ</a><a id="13111" class="Symbol">)</a>
    <a id="13117" class="Symbol">(</a><a id="13118" href="Context.Base.html#13118" class="Bound">rCtxₛ</a>       <a id="13130" class="Symbol">:</a> <a id="13132" class="Symbol">{</a><a id="13133" href="Context.Base.html#13133" class="Bound">Δ</a> <a id="13135" href="Context.Base.html#13135" class="Bound">Γ</a> <a id="13137" href="Context.Base.html#13137" class="Bound">ΓR</a> <a id="13140" href="Context.Base.html#13140" class="Bound">Θ</a> <a id="13142" class="Symbol">:</a> <a id="13144" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="13147" class="Symbol">}</a> <a id="13149" class="Symbol">→</a> <a id="13151" class="Symbol">(</a><a id="13152" href="Context.Base.html#13152" class="Bound">e</a> <a id="13154" class="Symbol">:</a> <a id="13156" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="13160" href="Context.Base.html#13133" class="Bound">Δ</a> <a id="13162" href="Context.Base.html#13135" class="Bound">Γ</a> <a id="13164" href="Context.Base.html#13137" class="Bound">ΓR</a><a id="13166" class="Symbol">)</a> <a id="13168" class="Symbol">→</a> <a id="13170" class="Symbol">(</a><a id="13171" href="Context.Base.html#13171" class="Bound">σ</a> <a id="13173" class="Symbol">:</a> <a id="13175" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13179" href="Context.Base.html#13140" class="Bound">Θ</a> <a id="13181" href="Context.Base.html#13133" class="Bound">Δ</a><a id="13182" class="Symbol">)</a> <a id="13184" class="Symbol">→</a> <a id="13186" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="13189" class="Symbol">)</a>
    <a id="13195" class="Symbol">(</a><a id="13196" href="Context.Base.html#13196" class="Bound">factorExtₛ</a>  <a id="13208" class="Symbol">:</a> <a id="13210" class="Symbol">∀</a> <a id="13212" class="Symbol">{</a><a id="13213" href="Context.Base.html#13213" class="Bound">Δ</a> <a id="13215" href="Context.Base.html#13215" class="Bound">Γ</a> <a id="13217" href="Context.Base.html#13217" class="Bound">ΓR</a> <a id="13220" href="Context.Base.html#13220" class="Bound">Θ</a> <a id="13222" class="Symbol">:</a> <a id="13224" href="Context.Base.html#419" class="Datatype">Ctx</a><a id="13227" class="Symbol">}</a> <a id="13229" class="Symbol">(</a><a id="13230" href="Context.Base.html#13230" class="Bound">e</a> <a id="13232" class="Symbol">:</a> <a id="13234" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="13238" href="Context.Base.html#13213" class="Bound">Δ</a> <a id="13240" href="Context.Base.html#13215" class="Bound">Γ</a> <a id="13242" href="Context.Base.html#13217" class="Bound">ΓR</a><a id="13244" class="Symbol">)</a> <a id="13246" class="Symbol">(</a><a id="13247" href="Context.Base.html#13247" class="Bound">σ</a> <a id="13249" class="Symbol">:</a> <a id="13251" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13255" href="Context.Base.html#13220" class="Bound">Θ</a> <a id="13257" href="Context.Base.html#13213" class="Bound">Δ</a><a id="13258" class="Symbol">)</a> <a id="13260" class="Symbol">→</a> <a id="13262" href="Context.Base.html#10670" class="Bound">Acc</a> <a id="13266" href="Context.Base.html#13220" class="Bound">Θ</a> <a id="13268" class="Symbol">(</a><a id="13269" href="Context.Base.html#12950" class="Bound">lCtxₛ</a> <a id="13275" href="Context.Base.html#13230" class="Bound">e</a> <a id="13277" href="Context.Base.html#13247" class="Bound">σ</a><a id="13278" class="Symbol">)</a> <a id="13280" class="Symbol">(</a><a id="13281" href="Context.Base.html#13118" class="Bound">rCtxₛ</a> <a id="13287" href="Context.Base.html#13230" class="Bound">e</a> <a id="13289" href="Context.Base.html#13247" class="Bound">σ</a><a id="13290" class="Symbol">))</a>
    <a id="13297" class="Keyword">where</a>

    <a id="13308" class="Keyword">infixr</a> <a id="13315" class="Number">20</a> <a id="13318" href="Context.Base.html#13360" class="Function Operator">_∙ₛ_</a>

    <a id="13328" class="Comment">-- substitution composition</a>
    <a id="Substitution.Composition._∙ₛ_"></a><a id="13360" href="Context.Base.html#13360" class="Function Operator">_∙ₛ_</a> <a id="13365" class="Symbol">:</a> <a id="13367" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13371" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="13373" href="Context.Base.html#598" class="Generalizable">Γ</a> <a id="13375" class="Symbol">→</a> <a id="13377" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13381" href="Context.Base.html#657" class="Generalizable">Δ&#39;</a> <a id="13384" href="Context.Base.html#655" class="Generalizable">Δ</a> <a id="13386" class="Symbol">→</a> <a id="13388" href="Context.Base.html#11143" class="Datatype">Sub</a> <a id="13392" href="Context.Base.html#657" class="Generalizable">Δ&#39;</a> <a id="13395" href="Context.Base.html#598" class="Generalizable">Γ</a>
    <a id="13401" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>        <a id="13411" href="Context.Base.html#13360" class="Function Operator">∙ₛ</a> <a id="13414" href="Context.Base.html#13414" class="Bound">s</a> <a id="13416" class="Symbol">=</a> <a id="13418" href="Context.Base.html#11175" class="InductiveConstructor">[]</a>
    <a id="13425" class="Symbol">(</a><a id="13426" href="Context.Base.html#13426" class="Bound">s&#39;</a> <a id="13429" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="13432" href="Context.Base.html#13432" class="Bound">t</a><a id="13433" class="Symbol">)</a> <a id="13435" href="Context.Base.html#13360" class="Function Operator">∙ₛ</a> <a id="13438" href="Context.Base.html#13438" class="Bound">s</a> <a id="13440" class="Symbol">=</a> <a id="13442" href="Context.Base.html#13426" class="Bound">s&#39;</a> <a id="13445" href="Context.Base.html#13360" class="Function Operator">∙ₛ</a> <a id="13448" href="Context.Base.html#13438" class="Bound">s</a> <a id="13450" href="Context.Base.html#11195" class="InductiveConstructor Operator">`,</a> <a id="13453" href="Context.Base.html#12867" class="Bound">substTm</a> <a id="13461" href="Context.Base.html#13438" class="Bound">s</a> <a id="13463" href="Context.Base.html#13432" class="Bound">t</a>
    <a id="13469" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="13474" href="Context.Base.html#13474" class="Bound">s&#39;</a> <a id="13477" href="Context.Base.html#13477" class="Bound">e</a> <a id="13479" href="Context.Base.html#13360" class="Function Operator">∙ₛ</a> <a id="13482" href="Context.Base.html#13482" class="Bound">s</a> <a id="13484" class="Symbol">=</a> <a id="13486" href="Context.Base.html#11258" class="InductiveConstructor">lock</a> <a id="13491" class="Symbol">(</a><a id="13492" href="Context.Base.html#13474" class="Bound">s&#39;</a> <a id="13495" href="Context.Base.html#13360" class="Function Operator">∙ₛ</a> <a id="13498" href="Context.Base.html#13028" class="Bound">factorSubₛ</a> <a id="13509" href="Context.Base.html#13477" class="Bound">e</a> <a id="13511" href="Context.Base.html#13482" class="Bound">s</a><a id="13512" class="Symbol">)</a> <a id="13514" class="Symbol">(</a><a id="13515" href="Context.Base.html#13196" class="Bound">factorExtₛ</a> <a id="13526" href="Context.Base.html#13477" class="Bound">e</a> <a id="13528" href="Context.Base.html#13482" class="Bound">s</a><a id="13529" class="Symbol">)</a>
</pre><hr><p style="font-family: monospace">Generated from commit <a href="https://github.com/nachivpn/k/tree/2fd14c996b195ef101dff8919e837907ca0a08aa">2fd14c996b195ef101dff8919e837907ca0a08aa</a>.</p></body></html>